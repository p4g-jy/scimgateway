// ================================================================
// File:    scim-stream.js
//
// Author:  Jarle Elshaug
//
// Purpose: SCIM Stream message subscription and automated provisioning
//          getApproles() for exporting all groups into Entra ID AppRole manifest-format
//
// Note: SCIM Stream is a prerequisite for message subscription
//       for details see: https://elshaug.xyz/docs/scim-stream
//
// ================================================================
'use strict';const a0_0x32b8a6=a0_0x5a6a;(function(_0x3b1964,_0x4ffd0d){const _0xd63a1b=a0_0x5a6a,_0x5ce8bf=_0x3b1964();while(!![]){try{const _0x18473f=parseInt(_0xd63a1b(0x1f2))/0x1*(parseInt(_0xd63a1b(0x23c))/0x2)+-parseInt(_0xd63a1b(0x27c))/0x3*(parseInt(_0xd63a1b(0x20b))/0x4)+parseInt(_0xd63a1b(0x217))/0x5*(parseInt(_0xd63a1b(0x298))/0x6)+parseInt(_0xd63a1b(0x266))/0x7+parseInt(_0xd63a1b(0x240))/0x8*(-parseInt(_0xd63a1b(0x291))/0x9)+parseInt(_0xd63a1b(0x1ea))/0xa*(parseInt(_0xd63a1b(0x277))/0xb)+parseInt(_0xd63a1b(0x28b))/0xc*(-parseInt(_0xd63a1b(0x29d))/0xd);if(_0x18473f===_0x4ffd0d)break;else _0x5ce8bf['push'](_0x5ce8bf['shift']());}catch(_0x2e9599){_0x5ce8bf['push'](_0x5ce8bf['shift']());}}}(a0_0x30b9,0xb550b));function a0_0x5a6a(_0x5c3813,_0xd0cad1){const _0x30b9b9=a0_0x30b9();return a0_0x5a6a=function(_0x5a6acc,_0x43c16c){_0x5a6acc=_0x5a6acc-0x1d6;let _0x1f535=_0x30b9b9[_0x5a6acc];return _0x1f535;},a0_0x5a6a(_0x5c3813,_0xd0cad1);}const nats=require(a0_0x32b8a6(0x215)),ascii127=require('fold-to-ascii'),fs=require('fs'),utils=require(a0_0x32b8a6(0x25b)),path=require(a0_0x32b8a6(0x22b)),crypto=require(a0_0x32b8a6(0x1f6));function a0_0x30b9(){const _0x4859fe=[']\x20error:\x20missing\x20one\x20or\x20more\x20mandatory\x20configurations\x20e.g.\x20stream.baseUrls,\x20stream.certificate.ca,\x20nats.tenant,\x20nats.subject,\x20nats.secret\x20and\x20nats.jwt','1340QtXxnO',',false','\x20done',']\x20client\x20is\x20attempting\x20to\x20reconnect\x20','541104zRwmEW','convertRolesToGroups','deliverNew','\x20handling\x20message:\x20','\x20message:\x20user\x20not\x20deleted\x20because\x20of\x20configuration\x20modifyOnly=true','set','active','Reconnecting','modifyOnly','StringCodec','roles','tenant','includes','\x20error:\x20missing\x20result','getProcessed','\x20(count=','getServer','\x20error:\x20','subject','stringify','\x20=>\x20subscriber\x20stopped','substring','lowercase',']\x20restarting\x20connection','\x20message\x20json\x20parsing\x20error:\x20','operation','toLowerCase','../lib/utils','from','level','request','unsubscribe','body','display',']\x20handling\x20\x22','error','call','typeId','1435182YbsoCS','SCIM\x20Stream\x20-\x20Autogenerated','servers','logger','join','/approles','prototype','\x20createUser()\x20obj=','##doIncrement','originalUrl','uppercase',']\x20subscriber\x20error:\x20configuration\x20scim.usePutSoftSync\x20must\x20be\x20set\x20to\x20true','usePutSoftSync','isArray','forEach','increment','jetstream','9044893AbiSHj','\x20-\x20','waitOnFirstConnect','User','Resources','54yzaYvZ','string','file','Reconnect','utf-8','maxPingOut','onCreate','\x20message:\x20','getuniquevalue','Application','\x20Create\x20User\x20userName=','\x20-\x20please\x20verify\x20stream.connectionUrls,\x20stream.certificate.ca,\x20nats.secret\x20and\x20nats.subject\x20configuration','\x20role\x20removal\x20error:\x20','\x20result=',']\x20connect\x20error:\x20','1068lqUSZU','exports','name','fsExistsSync',']\x20subscriber[','durable','81YOzQTv','Errors','randomUUID','status','length','modifyGroup','password','84RyFUHg','readFileSync','replaceUsrGrp','jwtAuthenticator','debug','92066IIanhl','detail','message','connect','deliverTo','secret','getAppRoles','\x20roles\x20converted\x20to\x20groups\x20message:\x20','ackNone','\x20getUserId()\x20error:\x20',']\x20closed\x20with\x20error:\x20','queue','consumerOpts','\x20Delete\x20User\x20id=','split','\x20group\x20removal\x20error:\x20','subscribe','replaceDomains','queueGroup','activityOperation','write','data','durable_','false','10JXOtwp','DebugEvents','delete','ack','close','info','baseUrls','deleteUserOnLastGroupRoleRemoval','1565rBXdGE','\x20Replace\x20User\x20id=','value','approles','crypto','indexOf','\x20message:\x20user\x20does\x20not\x20exist','gwName','Operations','replace','elementnumber','/Users/','params','normalize','doIncrement','certificate','generateUserPassword','Subscriber','\x20error:\x20more\x20than\x20one\x20user\x20were\x20found}','\x20should\x20have\x20syntax:\x20<collector>.<channel>','description','closed','\x20missing\x20user\x20object\x20in\x20message:\x20','\x20missing\x20mandatory\x20user.userName\x20in\x20message:\x20','approles_','280444BFtEvO',']\x20subscriber\x20error:\x20missing\x20certificate\x20configuration','startsWith',']\x20error:\x20subject\x20','userName','type',']\x20subscriber\x20certificate\x20error:\x20','schemas','/certs/','transports','nats','push','417095ilMnBD','pingInterval','authenticator',']\x20error:\x20','foldReplacing','trim','\x20message:\x20user\x20not\x20created\x20because\x20of\x20configuration\x20modifyOnly=true','getUsers','headers','jwt','pluginName','then','\x20Create\x20userName=','Events','displayName','Disconnect','utf8','\x20=>\x20subscriber\x20not\x20activated','copyObj','_autogenerated.cfg','path','createUser',']\x20client\x20disconnected\x20','toUpperCase','decode','replaceAll','getUsers()\x20getObj=','modifyUser','configDir','\x20Delete\x20User\x20userName=','groups',']\x20connected\x20','true','mkdirSync','Msg-Id','deleteUser'];a0_0x30b9=function(){return _0x4859fe;};return a0_0x30b9();}module[a0_0x32b8a6(0x28c)][a0_0x32b8a6(0x203)]=function(_0x33e808,_0x3e6e69,_0x73c3e0){const _0x4b2276=a0_0x32b8a6,_0x12d9c9=_0x33e808,_0x366236=_0x3e6e69;if(!_0x366236[_0x4b2276(0x201)]||!_0x366236[_0x4b2276(0x201)]['ca']){_0x12d9c9[_0x4b2276(0x269)]['error'](_0x12d9c9['gwName']+'['+_0x12d9c9['pluginName']+_0x4b2276(0x20c));return;}if(!_0x366236[_0x4b2276(0x272)]){_0x12d9c9[_0x4b2276(0x269)][_0x4b2276(0x263)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x4b2276(0x221)]+_0x4b2276(0x271));return;}let _0x3e0f1f='';for(let _0x4ff6f2=0x0;_0x4ff6f2<_0x12d9c9[_0x4b2276(0x269)][_0x4b2276(0x214)]['length'];_0x4ff6f2++){if(_0x12d9c9[_0x4b2276(0x269)]['transports'][_0x4ff6f2][_0x4b2276(0x28d)]===_0x4b2276(0x27e)){_0x3e0f1f=_0x12d9c9['logger'][_0x4b2276(0x214)][_0x4ff6f2][_0x4b2276(0x25d)];break;}}const _0x5e6ada=''+(_0x3e0f1f===_0x4b2276(0x29c)?'\x0a':''),_0x146b1b={};try{_0x146b1b['ca']=[fs[_0x4b2276(0x299)](_0x12d9c9[_0x4b2276(0x233)]+_0x4b2276(0x213)+_0x366236[_0x4b2276(0x201)]['ca'])];}catch(_0x2525b7){_0x12d9c9[_0x4b2276(0x269)]['error'](_0x12d9c9[_0x4b2276(0x1f9)]+'['+_0x12d9c9['pluginName']+_0x4b2276(0x211)+_0x2525b7['message']);return;}const _0x5b61b0={},_0x3be961=new TextEncoder()['encode'](_0x366236['nats']['secret']),_0xdf6ba8=_0x366236[_0x4b2276(0x215)]['jwt'];_0x5b61b0[_0x4b2276(0x219)]=nats[_0x4b2276(0x29b)](_0xdf6ba8,_0x3be961),_0x5b61b0[_0x4b2276(0x268)]=_0x366236['baseUrls'],_0x5b61b0['tls']=_0x146b1b,_0x5b61b0[_0x4b2276(0x279)]=![],_0x5b61b0['reconnect']=!![],_0x5b61b0['reconnectTimeWait']=0x3e8*0xa,_0x5b61b0['maxReconnectAttempts']=-0x1,_0x5b61b0[_0x4b2276(0x218)]=0x2*0x3c*0x3e8,_0x5b61b0[_0x4b2276(0x281)]=0x5,_0x5b61b0[_0x4b2276(0x29c)]=![];let _0x47aacd;this['connect']=async _0x44949=>{const _0x34611e=_0x4b2276;try{_0x47aacd=await nats[_0x34611e(0x2a0)](_0x5b61b0);}catch(_0xd65432){_0x12d9c9[_0x34611e(0x269)][_0x34611e(0x263)](_0x12d9c9[_0x34611e(0x1f9)]+'['+_0x12d9c9['pluginName']+_0x34611e(0x28f)+_0x44949+_0x34611e(0x28a)+_0xd65432['message']+_0x34611e(0x287)),_0x5b61b0[_0x34611e(0x279)]=!![];try{_0x47aacd=await nats[_0x34611e(0x2a0)](_0x5b61b0);}catch(_0x4b42b4){_0x12d9c9[_0x34611e(0x269)][_0x34611e(0x263)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x34611e(0x221)]+']\x20subscriber['+_0x44949+_0x34611e(0x28a)+_0x4b42b4[_0x34611e(0x29f)]);return;}}_0x12d9c9['logger'][_0x34611e(0x1ef)](_0x12d9c9[_0x34611e(0x1f9)]+'['+_0x12d9c9['pluginName']+_0x34611e(0x28f)+_0x44949+_0x34611e(0x236)+(_0x5b61b0['tls']['ca']?'tls':'')+'\x20'+_0x47aacd[_0x34611e(0x250)]()),_0x47aacd[_0x34611e(0x207)]()[_0x34611e(0x222)](_0x2ab7f0=>{const _0x273c4c=_0x34611e;_0x2ab7f0&&_0x12d9c9[_0x273c4c(0x269)][_0x273c4c(0x263)](_0x12d9c9[_0x273c4c(0x1f9)]+'['+_0x12d9c9[_0x273c4c(0x221)]+_0x273c4c(0x28f)+_0x44949+_0x273c4c(0x1dc)+_0x2ab7f0[_0x273c4c(0x29f)]);});},this['subscribe']=async(_0x20f2b8,_0x2f89fd)=>{const _0x1044af=_0x4b2276;if(!_0x2f89fd||!_0x366236[_0x1044af(0x1f0)]||!_0x366236[_0x1044af(0x201)]||!_0x366236[_0x1044af(0x201)]['ca']||!_0x366236[_0x1044af(0x215)]||!_0x366236[_0x1044af(0x215)][_0x1044af(0x24b)]||!_0x366236[_0x1044af(0x215)][_0x1044af(0x1d7)]||!_0x366236[_0x1044af(0x215)][_0x1044af(0x220)]){_0x12d9c9[_0x1044af(0x269)]['error'](_0x12d9c9[_0x1044af(0x1f9)]+'['+_0x12d9c9[_0x1044af(0x221)]+_0x1044af(0x28f)+_0x2f89fd+_0x1044af(0x23b));return;}if(_0x2f89fd[_0x1044af(0x1e0)]('.')['length']<0x2){_0x12d9c9[_0x1044af(0x269)][_0x1044af(0x263)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x1044af(0x221)]+_0x1044af(0x28f)+_0x2f89fd+_0x1044af(0x20e)+_0x2f89fd+_0x1044af(0x205));return;}if(!_0x47aacd){_0x12d9c9[_0x1044af(0x269)][_0x1044af(0x263)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x1044af(0x221)]+_0x1044af(0x28f)+_0x2f89fd+']\x20error:\x20client\x20have\x20not\x20been\x20initialized');return;}const _0x6f0c58=nats[_0x1044af(0x249)](),_0x121e49=_0x47aacd[_0x1044af(0x276)](),_0x4816ac=nats[_0x1044af(0x1de)](),_0x4659dc=('deliver.'+_0x2f89fd+'.'+_0x12d9c9['pluginName'])[_0x1044af(0x230)]('*','_')[_0x1044af(0x230)]('>','_'),_0x1a13e6=(_0x1044af(0x1e8)+_0x2f89fd+'_'+_0x12d9c9[_0x1044af(0x221)])['replaceAll']('*','_')[_0x1044af(0x230)]('>','_')[_0x1044af(0x230)]('.','_');let _0x29db4c;try{_0x4816ac['stream']=_0x366236[_0x1044af(0x215)][_0x1044af(0x24b)],_0x4816ac[_0x1044af(0x290)](_0x1a13e6),_0x4816ac[_0x1044af(0x1d6)](_0x4659dc),_0x366236[_0x1044af(0x1e4)]&&_0x4816ac[_0x1044af(0x1dd)](_0x366236['queueGroup']),_0x4816ac[_0x1044af(0x242)](),_0x4816ac[_0x1044af(0x1da)](),_0x29db4c=await _0x121e49[_0x1044af(0x1e2)](_0x2f89fd,_0x4816ac);}catch(_0x488100){_0x12d9c9[_0x1044af(0x269)][_0x1044af(0x263)](_0x12d9c9[_0x1044af(0x1f9)]+'['+_0x12d9c9[_0x1044af(0x221)]+_0x1044af(0x28f)+_0x2f89fd+_0x1044af(0x21a)+_0x488100[_0x1044af(0x29f)]+_0x1044af(0x228)+_0x5e6ada);return;}const _0x18b866=async()=>{const _0x17b6c6=_0x1044af;try{for await(const _0x1a900c of _0x29db4c){if(!_0x1a900c[_0x17b6c6(0x21f)]||!_0x1a900c[_0x17b6c6(0x21f)]['get'](_0x17b6c6(0x239))){_0x1a900c[_0x17b6c6(0x1ed)]();continue;}const _0x4883c1=_0x12d9c9[_0x17b6c6(0x1f9)]+'['+_0x12d9c9['pluginName']+_0x17b6c6(0x28f)+_0x1a900c[_0x17b6c6(0x252)]+']['+_0x29db4c[_0x17b6c6(0x24e)]()+']['+(_0x1a900c['headers']?_0x1a900c[_0x17b6c6(0x21f)]['get'](_0x17b6c6(0x239)):'')+']';_0x12d9c9[_0x17b6c6(0x269)]['info'](_0x4883c1+_0x17b6c6(0x243)+_0x6f0c58['decode'](_0x1a900c[_0x17b6c6(0x1e7)])),_0x1a900c[_0x17b6c6(0x1ed)]();let _0xd54535;try{let _0x129556=_0x6f0c58[_0x17b6c6(0x22f)](_0x1a900c[_0x17b6c6(0x1e7)]);if(_0x366236[_0x17b6c6(0x1e3)]&&Array[_0x17b6c6(0x273)](_0x366236[_0x17b6c6(0x1e3)]))for(let _0x55d408=0x0;_0x55d408<_0x366236['replaceDomains'][_0x17b6c6(0x295)];_0x55d408++){const _0x1947ea=_0x366236[_0x17b6c6(0x1e3)][_0x55d408];if(!_0x1947ea['from']||!_0x1947ea[_0x17b6c6(0x25c)]['includes']('.')||!_0x1947ea['to']||!_0x1947ea['to']['includes']('.'))continue;const _0x40a817=new RegExp('@'+_0x1947ea[_0x17b6c6(0x25c)]+'\x22','gi');_0x129556=_0x129556['replace'](_0x40a817,'@'+_0x1947ea['to']+'\x22');}_0xd54535=JSON['parse'](_0x129556);}catch(_0x645527){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x258)+_0x645527[_0x17b6c6(0x29f)]+_0x17b6c6(0x283)+_0x6f0c58[_0x17b6c6(0x22f)](_0x1a900c[_0x17b6c6(0x1e7)])),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+'\x20done'+_0x5e6ada);continue;}const _0x5d35a1=_0xd54535['user'];if(!_0x5d35a1){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x208)+JSON[_0x17b6c6(0x253)](_0xd54535)),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}if(!_0x5d35a1[_0x17b6c6(0x20f)]){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x209)+JSON[_0x17b6c6(0x253)](_0xd54535)),_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}delete _0x5d35a1[_0x17b6c6(0x212)];let _0xad1856;_0x5d35a1['id']&&(_0xad1856=_0x5d35a1['id'],delete _0x5d35a1['id']);let _0x5ef708;_0x5d35a1['onCreate']&&(_0x5ef708=utils[_0x17b6c6(0x229)](_0x5d35a1[_0x17b6c6(0x282)]),delete _0x5d35a1[_0x17b6c6(0x282)]);await _0x12b589(_0x5d35a1);const _0x37e300=_0x5d35a1['userName'];let _0x21961e,_0x4fcee7;try{_0x21961e=await _0x4f8251(_0x17b6c6(0x20f),_0x37e300);}catch(_0x7295fa){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x1db)+_0x7295fa[_0x17b6c6(0x29f)]),_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+'\x20done'+_0x5e6ada);continue;}if(_0x366236[_0x17b6c6(0x241)]){let _0x597804=![];if(_0xd54535[_0x17b6c6(0x1fa)]&&Array['isArray'](_0xd54535[_0x17b6c6(0x1fa)]))for(let _0x54c697=0x0;_0x54c697<_0xd54535['Operations'][_0x17b6c6(0x295)];_0x54c697++){const _0x1b947a=_0xd54535[_0x17b6c6(0x1fa)][_0x54c697];_0x1b947a[_0x17b6c6(0x22b)][_0x17b6c6(0x20d)]('roles')&&(_0x1b947a[_0x17b6c6(0x22b)]=_0x17b6c6(0x235),Array[_0x17b6c6(0x273)](_0x1b947a[_0x17b6c6(0x1f4)])?(_0x1b947a[_0x17b6c6(0x1f4)][0x0]['id']=_0x1b947a[_0x17b6c6(0x1f4)][0x0][_0x17b6c6(0x1f4)],_0x1b947a['value'][0x0][_0x17b6c6(0x261)]=_0x1b947a['value'][0x0]['type']+_0x17b6c6(0x278)+_0x1b947a[_0x17b6c6(0x1f4)][0x0][_0x17b6c6(0x1f4)],delete _0x1b947a[_0x17b6c6(0x1f4)][0x0][_0x17b6c6(0x1f4)],delete _0x1b947a[_0x17b6c6(0x1f4)][0x0]['type']):_0x1b947a[_0x17b6c6(0x1f4)]=[{'id':_0x1b947a[_0x17b6c6(0x1f4)],'display':_0x1b947a[_0x17b6c6(0x1f4)]}],delete _0x1b947a[_0x17b6c6(0x265)],_0x597804=!![]);}if(_0x5d35a1[_0x17b6c6(0x24a)]&&Array['isArray'](_0x5d35a1[_0x17b6c6(0x24a)])&&_0x5d35a1['roles'][_0x17b6c6(0x295)]>0x0){if(!_0x5d35a1[_0x17b6c6(0x235)])_0x5d35a1[_0x17b6c6(0x235)]=[];if(!Array[_0x17b6c6(0x273)](_0x5d35a1['groups']))_0x5d35a1['groups']=[];for(let _0x4fc821=0x0;_0x4fc821<_0x5d35a1[_0x17b6c6(0x24a)][_0x17b6c6(0x295)];_0x4fc821++){const _0x4af965={},_0x27c9e6=_0x5d35a1['roles'][_0x4fc821];_0x4af965['value']=_0x27c9e6[_0x17b6c6(0x1f4)],_0x4af965['display']=_0x27c9e6[_0x17b6c6(0x210)]+_0x17b6c6(0x278)+_0x27c9e6[_0x17b6c6(0x261)],_0x5d35a1[_0x17b6c6(0x235)]['push'](_0x4af965);}delete _0x5d35a1[_0x17b6c6(0x24a)],_0x597804=!![];}if(_0x597804)_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x1d9)+JSON['stringify'](_0xd54535));}if(_0x366236[_0x17b6c6(0x1f1)]&&_0xd54535[_0x17b6c6(0x1e5)]===_0x17b6c6(0x232)){if(_0x5d35a1[_0x17b6c6(0x235)]&&Array['isArray'](_0x5d35a1[_0x17b6c6(0x235)])&&_0x5d35a1[_0x17b6c6(0x235)][_0x17b6c6(0x295)]===0x0){if(_0x5d35a1[_0x17b6c6(0x24a)]&&Array['isArray'](_0x5d35a1[_0x17b6c6(0x24a)])&&_0x5d35a1['roles'][_0x17b6c6(0x295)]===0x0){if(_0xd54535[_0x17b6c6(0x1fa)]&&Array[_0x17b6c6(0x273)](_0xd54535['Operations'])&&_0xd54535[_0x17b6c6(0x1fa)][_0x17b6c6(0x295)]>0x0)for(let _0x43fa08=0x0;_0x43fa08<_0xd54535[_0x17b6c6(0x1fa)][_0x17b6c6(0x295)];_0x43fa08++){const _0xe1fe33=_0xd54535[_0x17b6c6(0x1fa)][_0x43fa08];if(_0xe1fe33['op']==='remove'){if(_0xe1fe33[_0x17b6c6(0x22b)]){if(_0xe1fe33[_0x17b6c6(0x22b)][_0x17b6c6(0x20d)](_0x17b6c6(0x24a))&&_0xe1fe33[_0x17b6c6(0x265)])_0xd54535['activityOperation']='deleteUser';else _0xe1fe33['path']===_0x17b6c6(0x235)&&(_0xd54535[_0x17b6c6(0x1e5)]=_0x17b6c6(0x23a));}}}}}}if(!_0x21961e){if(_0xd54535['activityOperation']==='deleteUser'){_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+_0x17b6c6(0x234)+_0x37e300+_0x17b6c6(0x1f8)),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}if(_0x366236['modifyOnly']&&_0x366236[_0x17b6c6(0x248)]===!![]){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x223)+_0x37e300+_0x17b6c6(0x21d)),_0x12d9c9['logger']['debug'](_0x4883c1+'\x20done'+_0x5e6ada);continue;}if(Object[_0x17b6c6(0x26c)]['hasOwnProperty'][_0x17b6c6(0x264)](_0x5d35a1,_0x17b6c6(0x246))){if(typeof _0x5d35a1['active']===_0x17b6c6(0x27d)){const _0x387f88=_0x5d35a1[_0x17b6c6(0x246)][_0x17b6c6(0x25a)]();if(_0x387f88===_0x17b6c6(0x237))_0x5d35a1[_0x17b6c6(0x246)]=!![];else{if(_0x387f88===_0x17b6c6(0x1e9))_0x5d35a1[_0x17b6c6(0x246)]=![];}}if(_0x5d35a1['active']===![]){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x223)+_0x37e300+'\x20message:\x20user\x20not\x20created\x20because\x20of\x20active=false'),_0x12d9c9['logger'][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}}_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+_0x17b6c6(0x286)+_0x37e300);const _0x57af0a=utils[_0x17b6c6(0x229)](_0x5d35a1);try{delete _0x57af0a['groups'];!_0x57af0a[_0x17b6c6(0x297)]&&_0x366236[_0x17b6c6(0x202)]&&_0x366236[_0x17b6c6(0x202)]===!![]&&(_0x57af0a[_0x17b6c6(0x297)]=utils['createRandomPassword'](0xf));if(_0x5ef708||_0xad1856){if(_0x5ef708)for(const _0xaf96a in _0x5ef708){_0x57af0a[_0xaf96a]=_0x5ef708[_0xaf96a];}if(_0xad1856)_0x57af0a['id']=_0xad1856;await _0x12b589(_0x57af0a);}await _0x12d9c9[_0x17b6c6(0x22c)](_0x20f2b8,_0x57af0a),_0x5d35a1[_0x17b6c6(0x235)]&&Array[_0x17b6c6(0x273)](_0x5d35a1[_0x17b6c6(0x235)])&&_0x5d35a1[_0x17b6c6(0x235)][_0x17b6c6(0x295)]>0x0&&(_0x4fcee7=await _0x4f8251(_0x17b6c6(0x20f),_0x37e300));}catch(_0xf1d647){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x26d)+JSON[_0x17b6c6(0x253)](_0x57af0a)+_0x17b6c6(0x251)+_0xf1d647['message']+'}'),_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}}if(_0x21961e||_0x4fcee7){if(_0xd54535[_0x17b6c6(0x1e5)]===_0x17b6c6(0x23a)){if(_0x366236[_0x17b6c6(0x248)]&&_0x366236['modifyOnly']===!![]){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x1df)+_0x21961e+_0x17b6c6(0x244)),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+'\x20done'+_0x5e6ada);continue;}_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x1df)+_0x21961e);try{await _0x12d9c9[_0x17b6c6(0x23a)](_0x20f2b8,_0x21961e);}catch(_0x54cf47){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x1df)+_0x21961e+_0x17b6c6(0x251)+_0x54cf47[_0x17b6c6(0x29f)]+'}'),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+'\x20done'+_0x5e6ada);continue;}}else{if(_0x4fcee7)_0x21961e=_0x4fcee7;_0x12d9c9['logger'][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x1f3)+_0x21961e);const _0x3dac42={};_0x3dac42[_0x17b6c6(0x245)]=()=>{},_0x3dac42[_0x17b6c6(0x26f)]=_0x20f2b8?'/'+_0x20f2b8+'/Users/'+_0x21961e:_0x17b6c6(0x1fd)+_0x21961e,_0x3dac42[_0x17b6c6(0x1fe)]={},_0x3dac42['params']['id']=_0x21961e,_0x3dac42[_0x17b6c6(0x25e)]={},_0x3dac42[_0x17b6c6(0x25e)][_0x17b6c6(0x260)]=_0x5d35a1;try{await _0x12d9c9[_0x17b6c6(0x29a)](_0x3dac42);}catch(_0x24cf9e){_0x12d9c9[_0x17b6c6(0x269)]['debug'](_0x4883c1+_0x17b6c6(0x1f3)+_0x21961e+_0x17b6c6(0x251)+_0x24cf9e[_0x17b6c6(0x29f)]),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+'\x20done'+_0x5e6ada);continue;}if(_0x3dac42[_0x17b6c6(0x294)]&&_0x3dac42[_0x17b6c6(0x294)]!==0xc8){if(_0x3dac42[_0x17b6c6(0x260)]){if(_0x3dac42[_0x17b6c6(0x260)][_0x17b6c6(0x29e)]){let _0x56021f=_0x3dac42[_0x17b6c6(0x260)][_0x17b6c6(0x29e)];_0x56021f=_0x56021f['replace'](_0x12d9c9[_0x17b6c6(0x1f9)]+'['+_0x12d9c9[_0x17b6c6(0x221)]+']',''+_0x4883c1),_0x12d9c9['logger'][_0x17b6c6(0x263)](''+_0x56021f);}else{if(_0x3dac42['body']['Errors']&&Array[_0x17b6c6(0x273)](_0x3dac42[_0x17b6c6(0x260)][_0x17b6c6(0x292)])&&_0x3dac42[_0x17b6c6(0x260)][_0x17b6c6(0x292)][_0x17b6c6(0x295)]>0x0){let _0xfc2c23=_0x3dac42['body']['Errors'][0x0][_0x17b6c6(0x206)];_0xfc2c23=_0xfc2c23[_0x17b6c6(0x1fb)](_0x12d9c9[_0x17b6c6(0x1f9)]+'['+_0x12d9c9['pluginName']+']',''+_0x4883c1),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](''+_0xfc2c23);}}}}if(_0x366236[_0x17b6c6(0x272)]){const [_0x412a15,_0x487caf]=_0x12d9c9['convertedScim20']({'Operations':_0xd54535[_0x17b6c6(0x1fa)]});if(_0x487caf){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x1f3)+_0x21961e+'\x20convertedScim20\x20error:\x20'+_0x487caf[_0x17b6c6(0x29f)]),_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);continue;}const _0x1d04ce=[];if(_0x412a15[_0x17b6c6(0x24a)]&&Array[_0x17b6c6(0x273)](_0x412a15[_0x17b6c6(0x24a)]))for(let _0x1b73ab=0x0;_0x1b73ab<_0x412a15[_0x17b6c6(0x24a)]['length'];_0x1b73ab++){_0x412a15['roles'][_0x1b73ab][_0x17b6c6(0x259)]&&_0x412a15[_0x17b6c6(0x24a)][_0x1b73ab]['operation']===_0x17b6c6(0x1ec)&&_0x1d04ce['push'](_0x412a15[_0x17b6c6(0x24a)][_0x1b73ab]);}if(_0x1d04ce[_0x17b6c6(0x295)]>0x0)try{await _0x12d9c9[_0x17b6c6(0x232)](_0x20f2b8,_0x21961e,{'roles':_0x1d04ce});}catch(_0x389ec7){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x4883c1+_0x17b6c6(0x1f3)+_0x21961e+_0x17b6c6(0x288)+_0x389ec7['message']);}const _0x34f67b=[];if(_0x412a15['groups']&&Array[_0x17b6c6(0x273)](_0x412a15[_0x17b6c6(0x235)]))for(let _0x20c76e=0x0;_0x20c76e<_0x412a15[_0x17b6c6(0x235)][_0x17b6c6(0x295)];_0x20c76e++){_0x412a15[_0x17b6c6(0x235)][_0x20c76e][_0x17b6c6(0x259)]&&_0x412a15[_0x17b6c6(0x235)][_0x20c76e][_0x17b6c6(0x259)]===_0x17b6c6(0x1ec)&&_0x34f67b[_0x17b6c6(0x216)](_0x412a15[_0x17b6c6(0x235)][_0x20c76e]);}if(_0x34f67b[_0x17b6c6(0x295)]>0x0)for(let _0x43bb6e=0x0;_0x43bb6e<_0x34f67b[_0x17b6c6(0x295)];_0x43bb6e++){try{await _0x12d9c9[_0x17b6c6(0x296)](_0x20f2b8,_0x34f67b[_0x43bb6e]['id'],{'members':[{'operation':'delete','value':_0x21961e}]});}catch(_0x55df15){_0x12d9c9[_0x17b6c6(0x269)]['error'](_0x4883c1+'\x20Replace\x20User\x20id='+_0x21961e+_0x17b6c6(0x1e1)+_0x55df15[_0x17b6c6(0x29f)]);}}}}}_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x4883c1+_0x17b6c6(0x23e)+_0x5e6ada);}}catch(_0x489146){_0x12d9c9[_0x17b6c6(0x269)]['error'](_0x12d9c9[_0x17b6c6(0x1f9)]+'['+_0x12d9c9[_0x17b6c6(0x221)]+_0x17b6c6(0x28f)+_0x2f89fd+']\x20subscriber\x20stopped\x20error:\x20'+_0x489146[_0x17b6c6(0x29f)]);return;}try{_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x1ef)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x17b6c6(0x221)]+']\x20subscriber['+_0x2f89fd+']\x20restarting\x20subscriber'),_0x47aacd['Status']()===nats['CLOSED']&&(_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x29c)](_0x12d9c9['gwName']+'['+_0x12d9c9[_0x17b6c6(0x221)]+_0x17b6c6(0x28f)+_0x2f89fd+_0x17b6c6(0x257)),await this[_0x17b6c6(0x2a0)]()),_0x29db4c=await _0x121e49[_0x17b6c6(0x1e2)](_0x2f89fd,_0x4816ac),_0x18b866();}catch(_0x1ad63f){_0x12d9c9[_0x17b6c6(0x269)][_0x17b6c6(0x263)](_0x12d9c9[_0x17b6c6(0x1f9)]+'['+_0x12d9c9[_0x17b6c6(0x221)]+']\x20subscriber['+_0x2f89fd+_0x17b6c6(0x21a)+_0x1ad63f[_0x17b6c6(0x29f)]+_0x17b6c6(0x254)+_0x5e6ada);}};_0x18b866();const _0x499b78=async()=>{const _0x2e5421=_0x1044af;let _0x25e7dd=0x0;for await(const _0x5166ec of _0x47aacd[_0x2e5421(0x294)]()){switch(_0x5166ec[_0x2e5421(0x210)]){case nats[_0x2e5421(0x224)][_0x2e5421(0x226)]:_0x12d9c9['logger'][_0x2e5421(0x263)](_0x12d9c9[_0x2e5421(0x1f9)]+'['+_0x12d9c9[_0x2e5421(0x221)]+_0x2e5421(0x28f)+_0x2f89fd+_0x2e5421(0x22d)+_0x5166ec[_0x2e5421(0x1e7)]),_0x25e7dd=0x0;break;case nats[_0x2e5421(0x224)][_0x2e5421(0x27f)]:_0x12d9c9[_0x2e5421(0x269)][_0x2e5421(0x1ef)](_0x12d9c9[_0x2e5421(0x1f9)]+'['+_0x12d9c9[_0x2e5421(0x221)]+_0x2e5421(0x28f)+_0x2f89fd+']\x20client\x20reconnected\x20'+_0x5166ec['data']);try{await _0x29db4c['consumerInfo']();}catch(_0x347aa0){_0x29db4c[_0x2e5421(0x25f)]();}break;case nats['DebugEvents'][_0x2e5421(0x247)]:_0x25e7dd+=0x1;_0x25e7dd%0x1e===0x0&&_0x12d9c9[_0x2e5421(0x269)][_0x2e5421(0x29c)](_0x12d9c9[_0x2e5421(0x1f9)]+'['+_0x12d9c9[_0x2e5421(0x221)]+']\x20subscriber['+_0x2f89fd+_0x2e5421(0x23f)+_0x5166ec['data']+_0x2e5421(0x24f)+_0x25e7dd+')');break;case nats[_0x2e5421(0x1eb)]['StaleConnection']:_0x12d9c9[_0x2e5421(0x269)]['debug'](_0x12d9c9[_0x2e5421(0x1f9)]+'['+_0x12d9c9[_0x2e5421(0x221)]+_0x2e5421(0x28f)+_0x2f89fd+']\x20client\x20has\x20a\x20stale\x20connection\x20'+_0x5166ec['data']);break;}}};_0x499b78();};const _0x4f8251=async(_0x15323a,_0x28fd72)=>{const _0x556b73=_0x4b2276,_0xe430d9={'attribute':_0x15323a,'operator':'eq','value':_0x28fd72,'rawFilter':undefined,'startIndex':undefined,'count':undefined},_0x546ecd=[_0x15323a];if(_0x15323a!=='id')_0x546ecd[_0x556b73(0x216)]('id');try{const _0x176bfe=await _0x12d9c9[_0x556b73(0x21e)](_0x73c3e0,_0xe430d9,_0x546ecd);if(!_0x176bfe||!_0x176bfe[_0x556b73(0x27b)]||!Array['isArray'](_0x176bfe['Resources']))throw new Error(_0x556b73(0x231)+JSON[_0x556b73(0x253)](_0xe430d9)+_0x556b73(0x24d));if(_0x176bfe[_0x556b73(0x27b)][_0x556b73(0x295)]===0x0)return null;else{if(_0x176bfe['Resources']['length']>0x2)throw new Error(_0x556b73(0x231)+JSON[_0x556b73(0x253)](_0xe430d9)+_0x556b73(0x204));else{const _0x28767b=_0x176bfe[_0x556b73(0x27b)][0x0];if(!_0x28767b['id'])throw new Error(_0x556b73(0x231)+JSON[_0x556b73(0x253)](_0xe430d9)+_0x556b73(0x289)+JSON[_0x556b73(0x253)](_0x28767b)+'\x20error:\x20missing\x20id}');return decodeURIComponent(_0x28767b['id']);}}}catch(_0x96f4a3){throw new Error(_0x556b73(0x231)+JSON['stringify'](_0xe430d9)+'\x20error:\x20'+_0x96f4a3[_0x556b73(0x29f)]+'}');}},_0x3abd0d=_0x5243f4=>{const _0x3fabc0=_0x4b2276;if(!_0x5243f4||typeof _0x5243f4!==_0x3fabc0(0x27d))return[null,null];_0x5243f4=_0x5243f4['trim']();const _0x514559=_0x5243f4[_0x3fabc0(0x1f7)]('(');if(_0x514559<0x1)return[null,null];if(_0x5243f4[_0x3fabc0(0x255)](_0x5243f4[_0x3fabc0(0x295)]-0x1)!==')')return[null,null];if(_0x4c7899(_0x5243f4,'(')!==_0x4c7899(_0x5243f4,')'))return[null,null];const _0x3a20b4=_0x5243f4[_0x3fabc0(0x255)](0x0,_0x514559),_0x3b9e54=_0x5243f4[_0x3fabc0(0x255)](_0x514559+0x1,_0x5243f4[_0x3fabc0(0x295)]-0x1);let _0x17376d=[];const _0x2ded7f=_0x3b9e54['split'](',');let _0x3895dd='';for(let _0xae2398=0x0;_0xae2398<_0x2ded7f[_0x3fabc0(0x295)];_0xae2398++){const _0x3a6889=_0x3895dd?_0x3895dd+','+_0x2ded7f[_0xae2398]:_0x2ded7f[_0xae2398],_0x4da2a0=_0x4c7899(_0x3a6889,'('),_0x2deff5=_0x4c7899(_0x3a6889,')');if(_0x4da2a0===_0x2deff5)_0x17376d['push'](_0x53aef0(_0x3a6889,'\x22')),_0x3895dd='';else{if(_0x3895dd)_0x3895dd+=','+_0x2ded7f[_0xae2398];else _0x3895dd+=_0x2ded7f[_0xae2398];}}if(_0x17376d[_0x3fabc0(0x295)]===0x0)_0x17376d=null;return[_0x3a20b4,_0x17376d];};function _0x4c7899(_0x17da87,_0x5e133c){let _0x3333bb=0x0;for(let _0x263064=0x0;_0x263064<_0x17da87['length'];_0x263064++){_0x17da87['charAt'](_0x263064)===_0x5e133c&&(_0x3333bb+=0x1);}return _0x3333bb;}const _0x53aef0=(_0x13172f,_0x4c6fe0)=>{const _0x5acdb2=_0x4b2276;if(typeof _0x13172f!==_0x5acdb2(0x27d)||typeof _0x4c6fe0!==_0x5acdb2(0x27d))return _0x13172f;if(_0x13172f[_0x5acdb2(0x295)]===0x1)return _0x13172f;if(_0x4c6fe0[_0x5acdb2(0x295)]!==0x1)return _0x13172f;return _0x13172f=_0x13172f[_0x5acdb2(0x21c)](),_0x13172f[_0x5acdb2(0x255)](0x0,0x1)===_0x4c6fe0&&(_0x13172f=_0x13172f[_0x5acdb2(0x255)](0x1)),_0x13172f[_0x5acdb2(0x255)](_0x13172f['length']-0x1)===_0x4c6fe0&&(_0x13172f=_0x13172f[_0x5acdb2(0x255)](0x0,_0x13172f['length']-0x1)),_0x13172f;},_0x3f50c4=async(_0x393d9e,_0x3bd66f,_0x334be4)=>{const _0x175101=_0x4b2276;if(!_0x393d9e||!_0x3bd66f||!_0x334be4)return null;const [_0x25f9cd,_0x408bf1]=_0x3abd0d(_0x334be4);if(!_0x25f9cd||!_0x408bf1){const _0x2f521c=_0x334be4[_0x175101(0x1e0)]('(');if(_0x2f521c['length']>0x1){const _0x4074cc=[_0x175101(0x256),_0x175101(0x270),'firstn',_0x175101(0x1fc),_0x175101(0x26a),'replace','normalize',_0x175101(0x275),_0x175101(0x284)],_0x4dc70c=_0x2f521c[0x0][_0x175101(0x25a)]();if(_0x4074cc[_0x175101(0x24c)](_0x4dc70c))return null;}return _0x334be4;}for(let _0x2b87ad=0x0;_0x2b87ad<_0x408bf1[_0x175101(0x295)];_0x2b87ad++){if(_0x408bf1[_0x2b87ad][_0x175101(0x255)](0x0,0x1)==='['){const _0x20ec2d=_0x408bf1[_0x2b87ad][_0x175101(0x1f7)](']');if(_0x20ec2d<0x0)return null;const _0x7720de=_0x408bf1[_0x2b87ad][_0x175101(0x255)](0x1,_0x20ec2d),_0x335b9b=_0x7720de[_0x175101(0x1e0)]('.');let _0x576e82;for(let _0x193764=0x0;_0x193764<_0x335b9b[_0x175101(0x295)];_0x193764++){if(_0x193764===0x0)_0x576e82=_0x393d9e[_0x335b9b[_0x193764]];else{if(!_0x576e82)return null;_0x576e82=_0x576e82[_0x335b9b[_0x193764]];}}if(!_0x576e82)return null;_0x408bf1[_0x2b87ad]=_0x576e82;}}for(let _0x496e03=0x0;_0x496e03<_0x408bf1[_0x175101(0x295)];_0x496e03++){const [_0x84f90e]=_0x3abd0d(_0x408bf1[_0x496e03]);_0x84f90e&&(_0x408bf1[_0x496e03]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x408bf1[_0x496e03]));}if(_0x408bf1[0x0]===null)return null;switch(_0x25f9cd[_0x175101(0x25a)]()){case'lowercase':{if(_0x408bf1[_0x175101(0x295)]!==0x1)return null;const [_0x17d605]=_0x3abd0d(_0x408bf1[0x0]);if(_0x17d605)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x17d605);if(_0x408bf1[0x0]===null)return null;return _0x408bf1[0x0]['toLowerCase']();}case _0x175101(0x270):{if(_0x408bf1[_0x175101(0x295)]!==0x1)return null;const [_0x1e3357]=_0x3abd0d(_0x408bf1[0x0]);if(_0x1e3357)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x1e3357);if(_0x408bf1[0x0]===null)return null;return _0x408bf1[0x0][_0x175101(0x22e)]();}case'firstn':{if(_0x408bf1[_0x175101(0x295)]!==0x2)return null;const [_0x5b2216]=_0x3abd0d(_0x408bf1[0x0]);if(_0x5b2216)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x5b2216);if(_0x408bf1[0x0]===null)return null;if(isNaN(_0x408bf1[0x1]))return null;return _0x408bf1[0x0][_0x175101(0x255)](0x0,_0x408bf1[0x1]);}case _0x175101(0x1fc):{const [_0x5d6f05]=_0x3abd0d(_0x408bf1[0x0]);if(_0x408bf1[_0x175101(0x295)]<0x2)return null;if(_0x5d6f05)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x5d6f05);if(_0x408bf1[0x0]===null)return null;const _0xbf5c6c=_0x408bf1[0x1];if(isNaN(_0xbf5c6c))return null;let _0x22d39e;if(_0x408bf1[_0x175101(0x295)]===0x3)_0x22d39e=_0x408bf1[0x0][_0x175101(0x1e0)](_0x408bf1[0x2]);else _0x22d39e=_0x22d39e=_0x408bf1[0x0]['split']('\x20');if(_0xbf5c6c<=_0x22d39e[_0x175101(0x295)])return _0x22d39e[_0xbf5c6c-0x1];else return'';}case _0x175101(0x1fb):{const [_0x1b51fa]=_0x3abd0d(_0x408bf1[0x0]);if(_0x1b51fa)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x1b51fa);if(_0x408bf1[0x0]===null)return null;if(_0x408bf1['length']!==0x3)return null;return _0x408bf1[0x0][_0x175101(0x230)](_0x408bf1[0x1],_0x408bf1[0x2]);}case _0x175101(0x1ff):{if(_0x408bf1[_0x175101(0x295)]!==0x1)return null;const [_0x36bd7f]=_0x3abd0d(_0x408bf1[0x0]);if(_0x36bd7f)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x36bd7f);if(_0x408bf1[0x0]===null)return null;return ascii127[_0x175101(0x21b)](_0x408bf1[0x0]);}case'join':{let _0x99dfea='';for(let _0x4a2fbb=0x0;_0x4a2fbb<_0x408bf1[_0x175101(0x295)];_0x4a2fbb++){const [_0x1f0e22]=_0x3abd0d(_0x408bf1[_0x4a2fbb]);if(_0x1f0e22)_0x408bf1[_0x4a2fbb]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x1f0e22);if(_0x408bf1[_0x4a2fbb]===null)return null;_0x99dfea+=_0x408bf1[_0x4a2fbb];}return _0x99dfea;}case _0x175101(0x275):{if(_0x408bf1['length']>0x2)return null;const [_0x14cceb]=_0x3abd0d(_0x408bf1[0x0]);if(_0x14cceb)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x14cceb);if(_0x408bf1[0x0]===null)return null;const _0x2a4caa=parseInt(_0x408bf1[0x0]);if(isNaN(_0x2a4caa))return null;let _0x44bd04=_0x175101(0x26e);_0x44bd04+=','+_0x408bf1[0x0];if(_0x408bf1['length']===0x2&&_0x408bf1[0x1][_0x175101(0x25a)]()===_0x175101(0x237))_0x44bd04+=',true';else _0x44bd04+=_0x175101(0x23d);return _0x44bd04+='##',_0x44bd04;}case'getuniquevalue':{if(_0x408bf1[_0x175101(0x295)]!==0x1)return null;const [_0x3a922d]=_0x3abd0d(_0x408bf1[0x0]);if(_0x3a922d)_0x408bf1[0x0]=await _0x3f50c4(_0x393d9e,_0x3bd66f,_0x3a922d);if(_0x408bf1[0x0]===null)return null;let _0x537552,_0x132734=![],_0x4b11a6='';const _0x3a8a28=_0x408bf1[0x0][_0x175101(0x1e0)]('##');if(_0x3a8a28['length']>0x2)for(let _0x4a18a7=0x0;_0x4a18a7<_0x3a8a28[_0x175101(0x295)];_0x4a18a7++){if(_0x3a8a28[_0x4a18a7][_0x175101(0x20d)](_0x175101(0x200))){const _0x1f5d27=_0x3a8a28[_0x4a18a7]['split'](',');if(_0x1f5d27[_0x175101(0x295)]<0x2)return null;const _0x35bb18=parseInt(_0x1f5d27[0x1]);if(isNaN(_0x35bb18))return null;_0x4b11a6='##'+_0x3a8a28[_0x4a18a7]+'##',_0x537552=_0x1f5d27[0x1],_0x1f5d27[_0x175101(0x295)]>0x2&&(_0x132734=_0x1f5d27[0x2][_0x175101(0x25a)]()==='true');}}let _0x4c5e4c,_0x57fbbc=0x0,_0x56b852=0x0;if(_0x537552){_0x56b852=_0x537552['length'],_0x57fbbc=0xa;for(let _0x947799=0x1;_0x947799<_0x56b852;_0x947799++){_0x57fbbc*=0xa;}_0x57fbbc-=0x1,_0x4c5e4c=parseInt(_0x537552);if(isNaN(_0x4c5e4c))return null;_0x4c5e4c-=0x1;}else _0x4c5e4c=0x0;do{_0x4c5e4c+=0x1;let _0x4be14d=_0x408bf1[0x0];if(_0x537552!==undefined&&_0x4b11a6){let _0x16010a=_0x4c5e4c['toString']();while(_0x16010a[_0x175101(0x295)]<_0x56b852){_0x16010a='0'+_0x16010a;}_0x132734?_0x4be14d=_0x4be14d[_0x175101(0x1fb)](_0x4b11a6,_0x16010a):(_0x4be14d=_0x4be14d[_0x175101(0x1fb)](_0x4b11a6,''),_0x132734=!![],_0x4c5e4c-=0x1);}try{const _0x321965=await _0x4f8251(_0x3bd66f,_0x4be14d);if(!_0x321965)return _0x4be14d;}catch(_0x376b62){return _0x12d9c9[_0x175101(0x269)][_0x175101(0x263)](_0x12d9c9[_0x175101(0x1f9)]+'['+_0x12d9c9[_0x175101(0x221)]+']\x20'+_0x25f9cd+'\x20getUserId()\x20error:\x20'+_0x376b62['message']),null;}}while(_0x4c5e4c<_0x57fbbc);return null;}default:}return null;},_0x12b589=async _0x1a999e=>{const _0x3c59a7=_0x4b2276;for(const _0xf12635 in _0x1a999e){const _0x1f602e=_0x1a999e[_0xf12635],[_0xc9970c,_0x27c379]=_0x3abd0d(_0x1f602e);if(_0xc9970c){const _0x65808b=''+_0xf12635,_0x435f58=_0xc9970c+'('+_0x27c379[_0x3c59a7(0x26a)](',')+')',_0x10f829=await _0x3f50c4(_0x1a999e,_0x65808b,_0x435f58);if(_0x10f829===null)delete _0x1a999e[_0xf12635];else _0x1a999e[_0xf12635]=_0x10f829;}for(const _0x325912 in _0x1f602e){const _0x314e0e=_0x1f602e[_0x325912],[_0x175320,_0xed77f]=_0x3abd0d(_0x314e0e);if(_0x175320){const _0x9f0f03=_0xf12635+'.'+_0x325912,_0x1af5ae=_0x175320+'('+_0xed77f['join'](',')+')',_0x213556=await _0x3f50c4(_0x1a999e,_0x9f0f03,_0x1af5ae);if(_0x213556===null)delete _0x1f602e[_0x325912];else _0x1f602e[_0x325912]=_0x213556;}}}return _0x1a999e;};},module[a0_0x32b8a6(0x28c)][a0_0x32b8a6(0x1d8)]=async(_0x3366eb,_0x17469d,_0x3576aa,_0xcd491d)=>{const _0x698b36=a0_0x32b8a6,_0x253423=_0x698b36(0x1d8),_0x4feb47=_0x3366eb;_0x4feb47['logger'][_0x698b36(0x29c)](_0x4feb47[_0x698b36(0x1f9)]+'['+_0x4feb47[_0x698b36(0x221)]+_0x698b36(0x262)+_0x253423+'\x22');try{if(!fs['existsSync'](_0x4feb47[_0x698b36(0x233)]+'/approles'))fs[_0x698b36(0x238)](_0x4feb47[_0x698b36(0x233)]+_0x698b36(0x26b));}catch(_0x2c655f){}const _0x1f9f8c=path[_0x698b36(0x26a)](''+_0x4feb47[_0x698b36(0x233)],_0x698b36(0x1f5),_0x698b36(0x20a)+_0x4feb47[_0x698b36(0x221)]+_0x698b36(0x22a)),_0x8ba98b={};utils[_0x698b36(0x28e)](_0x1f9f8c)&&fs[_0x698b36(0x299)](_0x1f9f8c,_0x698b36(0x280))['split'](/\r?\n/)[_0x698b36(0x274)](_0x484219=>{const _0x3fca66=_0x698b36,_0x958902=_0x484219[_0x3fca66(0x1e0)]('\x20');_0x958902['length']===0x2&&(_0x8ba98b[_0x958902[0x0]]=_0x958902[0x1]);});const _0x2e99dc=fs['createWriteStream'](_0x1f9f8c,{'flags':'w','encoding':_0x698b36(0x227),'mode':0x1b6,'autoClose':!![]}),_0x212490=[],_0x122c4c=await _0x4feb47['getGroups'](_0x17469d,{'attribute':undefined,'operator':undefined,'value':undefined},['id',_0x698b36(0x225)]);return _0x122c4c['Resources'][_0x698b36(0x274)](_0x3f515d=>{const _0x38a98c=_0x698b36;if(_0x3f515d['id']){let _0x59e326=crypto[_0x38a98c(0x293)]();if(_0x8ba98b[_0x3f515d['id']])_0x59e326=_0x8ba98b[_0x3f515d['id']];const _0x1950ea={'allowedMemberTypes':[_0x38a98c(0x27a)],'description':_0x38a98c(0x267),'displayName':_0x3f515d[_0x38a98c(0x225)]||_0x3f515d['id'],'id':_0x59e326,'isEnabled':!![],'lang':null,'origin':_0x38a98c(0x285),'value':decodeURIComponent(_0x3f515d['id'])};_0x212490[_0x38a98c(0x216)](_0x1950ea),_0x2e99dc[_0x38a98c(0x1e6)](_0x3f515d['id']+'\x20'+_0x59e326+'\x0a');}}),_0x2e99dc[_0x698b36(0x1ee)](),_0x4feb47[_0x698b36(0x269)]['debug'](_0x4feb47[_0x698b36(0x1f9)]+'['+_0x4feb47[_0x698b36(0x221)]+']\x20approle\x20uuid\x20file\x20created:\x20'+_0x1f9f8c),{'Resources':[{'appRoles':_0x212490}]};};