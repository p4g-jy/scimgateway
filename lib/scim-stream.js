// ================================================================
// File:    scim-stream.js
//
// Author:  Jarle Elshaug
//
// Purpose: SCIM Stream message subscription and automated provisioning
//          getApproles() for exporting all groups into Entra ID AppRole manifest-format
//
// Note: SCIM Stream is a prerequisite for message subscription
//       for details see: https://elshaug.xyz/docs/scim-stream
//
// ================================================================
'use strict';const a0_0x20b93f=a0_0xd87a;(function(_0x2c966a,_0x15f3d8){const _0x12dfc3=a0_0xd87a,_0x587b2f=_0x2c966a();while(!![]){try{const _0x3fb573=parseInt(_0x12dfc3(0x1eb))/0x1*(-parseInt(_0x12dfc3(0x241))/0x2)+parseInt(_0x12dfc3(0x223))/0x3+-parseInt(_0x12dfc3(0x212))/0x4+parseInt(_0x12dfc3(0x1ef))/0x5+parseInt(_0x12dfc3(0x1d7))/0x6+-parseInt(_0x12dfc3(0x249))/0x7*(parseInt(_0x12dfc3(0x1d5))/0x8)+-parseInt(_0x12dfc3(0x296))/0x9;if(_0x3fb573===_0x15f3d8)break;else _0x587b2f['push'](_0x587b2f['shift']());}catch(_0x20fc51){_0x587b2f['push'](_0x587b2f['shift']());}}}(a0_0x3168,0xeb320));function a0_0x3168(){const _0x522ced=['subscribe','6178968ncQJwa','\x20Delete\x20User\x20userName=','filter_subject','\x20Create\x20User\x20userName=','\x20error:\x20missing\x20result','error','info','onCreate','trim','\x20message:\x20','jwtAuthenticator','ConsumerNotFound','pluginName','displayName','getServer','toLowerCase','mkdirSync',',true','delete','startsWith','1553TASALv','\x20message\x20json\x20parsing\x20error:\x20','prototype','convertedScim20','5909495FqtYSN',',false','active',']\x20subscriber[','authenticator',']\x20handling\x20\x22',']\x20closed\x20with\x20error:\x20','getUsers','substring','getUsers()\x20getObj=','\x20Replace\x20User\x20id=','\x20error:\x20more\x20than\x20one\x20user\x20were\x20found}','from','\x20missing\x20mandatory\x20user.userName\x20in\x20message:\x20','tls',']\x20connect\x20error:\x20','indexOf','false',']\x20client\x20has\x20a\x20stale\x20connection\x20','SIGINT','parse',']\x20subscriber\x20error:\x20missing\x20certificate\x20configuration','crypto','path','\x20message:\x20user\x20does\x20not\x20exist','uppercase','nats',']\x20client\x20disconnected\x20','randomUUID','consume','encode','durable_','join','\x20group\x20removal\x20error:\x20','set','336084jNhsdi','secret','level','replaceAll','connect','jwt','configDir',']\x20error:\x20subject\x20not\x20allowing\x20comma\x20separated\x20multiples','\x20role\x20removal\x20error:\x20','createWriteStream','Events','push','getuniquevalue','approles_','unsubscribe','baseUrls','closed','5567868osKgrD','modifyUser','message','then','/approles','\x20error:\x20missing\x20id}','replaceUsrGrp','certificate','Msg-Id','true','increment','\x20error:\x20','Operations','modifyGroup','subject','reconnectTimeWait','userName','\x20-\x20will\x20do\x20auto\x20reconnect\x20when\x20connection\x20becomes\x20available','\x20count=','\x20Create\x20userName=','password','_info','generateUserPassword','value','replace','getGroups','deliver_group','request','\x20message:\x20user\x20not\x20created\x20because\x20of\x20configuration\x20modifyOnly=true','\x20result=','654BjPcWY','display','##doIncrement',']\x20client\x20reconnected\x20','maxReconnectAttempts','\x20message:\x20user\x20not\x20created\x20because\x20of\x20active=false',']\x20error:\x20missing\x20one\x20or\x20more\x20mandatory\x20configurations\x20e.g.\x20stream.baseUrls,\x20stream.certificate.ca,\x20nats.tenant,\x20nats.subject,\x20nats.secret\x20and\x20nats.jwt','\x20should\x20have\x20syntax:\x20<collector>.<channel>','7wRAXbW','gwName','createRandomPassword',']\x20error:\x20','\x20Delete\x20User\x20id=','getProcessed',']\x20client\x20is\x20attempting\x20to\x20reconnect\x20','\x20convertedScim20\x20error:\x20',']\x20client\x20error\x20','replaceDomains','Resources','utf8','deleteUser','transports','consumers','\x20handling\x20message:\x20',']\x20client\x20consumer\x20reinitiated\x20because\x20of\x20','config','remove','tenant','approles','description',']\x20subscriber\x20error:\x20configuration\x20scim.usePutSoftSync\x20must\x20be\x20set\x20to\x20true','foldReplacing','lowercase','\x20missing\x20user\x20object\x20in\x20message:\x20','detail','length','firstn','body','isArray',']\x20client\x20consumer\x20error:\x20','usePutSoftSync','pingInterval','fold-to-ascii','consumerInfo','ack','Application','activityOperation','../lib/utils','params','groups','Reconnecting','normalize','name','roles','\x20done','string',']\x20connected\x20','split','fsExistsSync','includes','\x20roles\x20converted\x20to\x20groups\x20message:\x20','\x20getUserId()\x20error:\x20','debug','status','typeId','data','update','createUser','New','Explicit','headers','Error','logger','add','\x20-\x20','StringCodec','queueGroup','toUpperCase',']\x20subscriber\x20certificate\x20error:\x20','exports','charAt','get','hasOwnProperty','Errors',']\x20error:\x20client\x20have\x20not\x20been\x20initialized','13499397BWyXDI','operation','modifyOnly','servers','forEach','Disconnect','doIncrement','User','readFileSync','skipConvertRolesToGroups','type','stringify','waitOnFirstConnect','getAppRoles','write','8100304YXqbQL'];a0_0x3168=function(){return _0x522ced;};return a0_0x3168();}const nats=require(a0_0x20b93f(0x209)),ascii127=require(a0_0x20b93f(0x26b)),fs=require('fs'),utils=require(a0_0x20b93f(0x270)),path=require('path'),crypto=require(a0_0x20b93f(0x205));function a0_0xd87a(_0xde0db0,_0x4614f1){const _0x31689f=a0_0x3168();return a0_0xd87a=function(_0xd87ab8,_0x3be7cd){_0xd87ab8=_0xd87ab8-0x1c9;let _0x3e6d12=_0x31689f[_0xd87ab8];return _0x3e6d12;},a0_0xd87a(_0xde0db0,_0x4614f1);}module[a0_0x20b93f(0x290)]['Subscriber']=function(_0x491c9b,_0x53dbfe,_0x1ee34c,_0x13118a){const _0x461b07=a0_0x20b93f,_0x2d0b29=_0x491c9b,_0xc3dcd4=_0x53dbfe,_0x4a7335=_0x1ee34c,_0x5a7645=_0x13118a;if(!_0xc3dcd4['certificate']||!_0xc3dcd4[_0x461b07(0x22a)]['ca']){_0x2d0b29['logger'][_0x461b07(0x1dc)](_0x2d0b29[_0x461b07(0x24a)]+'['+_0x2d0b29[_0x461b07(0x1e3)]+_0x461b07(0x204));return;}if(!_0xc3dcd4[_0x461b07(0x269)]){_0x2d0b29[_0x461b07(0x289)][_0x461b07(0x1dc)](_0x2d0b29['gwName']+'['+_0x2d0b29[_0x461b07(0x1e3)]+_0x461b07(0x25f));return;}let _0x2758e0='';for(let _0x2cef03=0x0;_0x2cef03<_0x2d0b29[_0x461b07(0x289)]['transports'][_0x461b07(0x264)];_0x2cef03++){if(_0x2d0b29[_0x461b07(0x289)]['transports'][_0x2cef03][_0x461b07(0x275)]==='file'){_0x2758e0=_0x2d0b29[_0x461b07(0x289)][_0x461b07(0x256)][_0x2cef03][_0x461b07(0x214)];break;}}const _0x2d5297=''+(_0x2758e0===_0x461b07(0x27f)?'\x0a':''),_0x2af603={};try{_0x2af603['ca']=[fs[_0x461b07(0x1ce)](_0x2d0b29[_0x461b07(0x218)]+'/certs/'+_0xc3dcd4['certificate']['ca'])];}catch(_0x49bbd5){_0x2d0b29[_0x461b07(0x289)][_0x461b07(0x1dc)](_0x2d0b29[_0x461b07(0x24a)]+'['+_0x2d0b29[_0x461b07(0x1e3)]+_0x461b07(0x28f)+_0x49bbd5[_0x461b07(0x225)]);return;}const _0x504e71={},_0x50a8dd=new TextEncoder()[_0x461b07(0x20d)](_0xc3dcd4[_0x461b07(0x209)][_0x461b07(0x213)]),_0x138f91=_0xc3dcd4[_0x461b07(0x209)][_0x461b07(0x217)];_0x504e71[_0x461b07(0x1f3)]=nats[_0x461b07(0x1e1)](_0x138f91,_0x50a8dd),_0x504e71[_0x461b07(0x1c9)]=_0xc3dcd4['baseUrls'],_0x504e71[_0x461b07(0x1fd)]=_0x2af603,_0x504e71['waitOnFirstConnect']=![],_0x504e71['reconnect']=!![],_0x504e71[_0x461b07(0x232)]=0x3e8*0xa,_0x504e71[_0x461b07(0x245)]=-0x1,_0x504e71[_0x461b07(0x26a)]=0x2*0x3c*0x3e8,_0x504e71['maxPingOut']=0x5,_0x504e71[_0x461b07(0x27f)]=![];let _0x276714;this[_0x461b07(0x216)]=async()=>{const _0xf6e54c=_0x461b07;try{_0x276714=await nats['connect'](_0x504e71);}catch(_0x5a17e5){_0x2d0b29['logger']['error'](_0x2d0b29[_0xf6e54c(0x24a)]+'['+_0x2d0b29[_0xf6e54c(0x1e3)]+_0xf6e54c(0x1f2)+_0x4a7335+']['+_0x5a7645+_0xf6e54c(0x1fe)+_0x5a17e5[_0xf6e54c(0x225)]+'\x20-\x20will\x20do\x20auto\x20connect\x20when\x20available\x20-\x20however,\x20please\x20verify\x20stream\x20configuration'),_0x504e71[_0xf6e54c(0x1d2)]=!![];try{_0x276714=await nats['connect'](_0x504e71);}catch(_0x21c0fa){_0x2d0b29[_0xf6e54c(0x289)]['error'](_0x2d0b29[_0xf6e54c(0x24a)]+'['+_0x2d0b29[_0xf6e54c(0x1e3)]+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+']\x20connect\x20error:\x20'+_0x21c0fa[_0xf6e54c(0x225)]);return;}}_0x2d0b29['logger']['info'](_0x2d0b29[_0xf6e54c(0x24a)]+'['+_0x2d0b29[_0xf6e54c(0x1e3)]+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+_0xf6e54c(0x279)+(_0x504e71[_0xf6e54c(0x1fd)]['ca']?'tls':'')+'\x20'+_0x276714[_0xf6e54c(0x1e5)]()),_0x276714[_0xf6e54c(0x222)]()[_0xf6e54c(0x226)](_0x54e036=>{const _0x1ff8de=_0xf6e54c;_0x54e036&&_0x2d0b29[_0x1ff8de(0x289)][_0x1ff8de(0x1dc)](_0x2d0b29[_0x1ff8de(0x24a)]+'['+_0x2d0b29['pluginName']+_0x1ff8de(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x1ff8de(0x1f5)+_0x54e036['message']);});},this[_0x461b07(0x1d6)]=async()=>{const _0x43d7eb=_0x461b07;if(!_0x5a7645||!_0xc3dcd4[_0x43d7eb(0x221)]||!_0xc3dcd4[_0x43d7eb(0x22a)]||!_0xc3dcd4[_0x43d7eb(0x22a)]['ca']||!_0xc3dcd4[_0x43d7eb(0x209)]||!_0xc3dcd4[_0x43d7eb(0x209)][_0x43d7eb(0x25c)]||!_0xc3dcd4[_0x43d7eb(0x209)][_0x43d7eb(0x213)]||!_0xc3dcd4['nats'][_0x43d7eb(0x217)]){_0x2d0b29[_0x43d7eb(0x289)][_0x43d7eb(0x1dc)](_0x2d0b29['gwName']+'['+_0x2d0b29[_0x43d7eb(0x1e3)]+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+_0x43d7eb(0x247));return;}if(_0x5a7645[_0x43d7eb(0x27a)]('.')[_0x43d7eb(0x264)]<0x2){_0x2d0b29[_0x43d7eb(0x289)][_0x43d7eb(0x1dc)](_0x2d0b29[_0x43d7eb(0x24a)]+'['+_0x2d0b29['pluginName']+_0x43d7eb(0x1f2)+_0x4a7335+']['+_0x5a7645+']\x20error:\x20subject\x20'+_0x5a7645+_0x43d7eb(0x248));return;}if(_0x5a7645[_0x43d7eb(0x27c)](',')){_0x2d0b29[_0x43d7eb(0x289)][_0x43d7eb(0x1dc)](_0x2d0b29['gwName']+'['+_0x2d0b29[_0x43d7eb(0x1e3)]+_0x43d7eb(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x43d7eb(0x219));return;}if(!_0x276714){_0x2d0b29[_0x43d7eb(0x289)][_0x43d7eb(0x1dc)](_0x2d0b29[_0x43d7eb(0x24a)]+'['+_0x2d0b29[_0x43d7eb(0x1e3)]+_0x43d7eb(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x43d7eb(0x295));return;}const _0x5637ab=async(_0x555590,_0x2a63c5)=>{const _0x5e7c91=_0x43d7eb;try{_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dd)](_0x555590+_0x5e7c91(0x258)+_0x2a63c5);let _0x3b7d8c;try{if(_0xc3dcd4[_0x5e7c91(0x252)]&&Array[_0x5e7c91(0x267)](_0xc3dcd4['replaceDomains']))for(let _0x241f77=0x0;_0x241f77<_0xc3dcd4['replaceDomains'][_0x5e7c91(0x264)];_0x241f77++){const _0x2c8509=_0xc3dcd4[_0x5e7c91(0x252)][_0x241f77];if(!_0x2c8509[_0x5e7c91(0x1fb)]||!_0x2c8509['from'][_0x5e7c91(0x27c)]('.')||!_0x2c8509['to']||!_0x2c8509['to']['includes']('.'))continue;const _0x3a2873=new RegExp('@'+_0x2c8509['from']+'\x22','gi');_0x2a63c5=_0x2a63c5[_0x5e7c91(0x23b)](_0x3a2873,'@'+_0x2c8509['to']+'\x22');}_0x3b7d8c=JSON[_0x5e7c91(0x203)](_0x2a63c5);}catch(_0x127352){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+_0x5e7c91(0x1ec)+_0x127352[_0x5e7c91(0x225)]+_0x5e7c91(0x1e0)+_0x2a63c5),_0x2d0b29[_0x5e7c91(0x289)]['debug'](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}const _0x3a4a23=_0x3b7d8c['user'];if(!_0x3a4a23){_0x2d0b29[_0x5e7c91(0x289)]['error'](_0x555590+_0x5e7c91(0x262)+JSON[_0x5e7c91(0x1d1)](_0x3b7d8c)),_0x2d0b29['logger']['debug'](_0x555590+'\x20done'+_0x2d5297);return;}if(!_0x3a4a23['userName']){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+_0x5e7c91(0x1fc)+JSON[_0x5e7c91(0x1d1)](_0x3b7d8c)),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}delete _0x3a4a23['schemas'];let _0x509d16;_0x3a4a23['id']&&(_0x509d16=_0x3a4a23['id'],delete _0x3a4a23['id']);let _0x330090;_0x3a4a23[_0x5e7c91(0x1de)]&&(_0x330090=utils['copyObj'](_0x3a4a23[_0x5e7c91(0x1de)]),delete _0x3a4a23[_0x5e7c91(0x1de)]);await _0x32f9e0(_0x3a4a23);const _0x4b2517=_0x3a4a23['userName'];let _0x5804ad,_0x2856f2;try{_0x5804ad=await _0x593801(_0x5e7c91(0x233),_0x4b2517);}catch(_0x14ad2f){_0x2d0b29['logger']['error'](_0x555590+_0x5e7c91(0x27e)+_0x14ad2f[_0x5e7c91(0x225)]),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}if(!_0xc3dcd4[_0x5e7c91(0x1cf)]){let _0x2d90b8=![];if(_0x3b7d8c[_0x5e7c91(0x22f)]&&Array['isArray'](_0x3b7d8c['Operations']))for(let _0x2870d3=0x0;_0x2870d3<_0x3b7d8c[_0x5e7c91(0x22f)]['length'];_0x2870d3++){const _0x4b4edd=_0x3b7d8c[_0x5e7c91(0x22f)][_0x2870d3];_0x4b4edd['path'][_0x5e7c91(0x1ea)](_0x5e7c91(0x276))&&(_0x4b4edd[_0x5e7c91(0x206)]=_0x5e7c91(0x272),Array[_0x5e7c91(0x267)](_0x4b4edd[_0x5e7c91(0x23a)])?(_0x4b4edd['value'][0x0]['id']=_0x4b4edd[_0x5e7c91(0x23a)][0x0][_0x5e7c91(0x23a)],_0x4b4edd['value'][0x0][_0x5e7c91(0x242)]=_0x4b4edd[_0x5e7c91(0x23a)][0x0][_0x5e7c91(0x1d0)]+_0x5e7c91(0x28b)+_0x4b4edd[_0x5e7c91(0x23a)][0x0][_0x5e7c91(0x23a)],delete _0x4b4edd['value'][0x0][_0x5e7c91(0x23a)],delete _0x4b4edd[_0x5e7c91(0x23a)][0x0][_0x5e7c91(0x1d0)]):_0x4b4edd[_0x5e7c91(0x23a)]=[{'id':_0x4b4edd[_0x5e7c91(0x23a)],'display':_0x4b4edd[_0x5e7c91(0x23a)]}],delete _0x4b4edd[_0x5e7c91(0x281)],_0x2d90b8=!![]);}if(_0x3a4a23['roles']&&Array[_0x5e7c91(0x267)](_0x3a4a23['roles'])&&_0x3a4a23[_0x5e7c91(0x276)][_0x5e7c91(0x264)]>0x0){if(!_0x3a4a23[_0x5e7c91(0x272)])_0x3a4a23[_0x5e7c91(0x272)]=[];if(!Array['isArray'](_0x3a4a23['groups']))_0x3a4a23[_0x5e7c91(0x272)]=[];for(let _0x1b9190=0x0;_0x1b9190<_0x3a4a23[_0x5e7c91(0x276)][_0x5e7c91(0x264)];_0x1b9190++){const _0xa54747={},_0x51380c=_0x3a4a23[_0x5e7c91(0x276)][_0x1b9190];_0xa54747[_0x5e7c91(0x23a)]=_0x51380c[_0x5e7c91(0x23a)],_0xa54747[_0x5e7c91(0x242)]=_0x51380c[_0x5e7c91(0x1d0)]+'\x20-\x20'+_0x51380c['display'],_0x3a4a23['groups'][_0x5e7c91(0x21d)](_0xa54747);}delete _0x3a4a23[_0x5e7c91(0x276)],_0x2d90b8=!![];}if(_0x2d90b8)_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x27d)+JSON[_0x5e7c91(0x1d1)](_0x3b7d8c));}if(_0xc3dcd4['deleteUserOnLastGroupRoleRemoval']&&_0x3b7d8c['activityOperation']===_0x5e7c91(0x224)){if(_0x3a4a23[_0x5e7c91(0x272)]&&Array['isArray'](_0x3a4a23['groups'])&&_0x3a4a23[_0x5e7c91(0x272)][_0x5e7c91(0x264)]===0x0){if(_0x3a4a23[_0x5e7c91(0x276)]&&Array[_0x5e7c91(0x267)](_0x3a4a23[_0x5e7c91(0x276)])&&_0x3a4a23['roles'][_0x5e7c91(0x264)]===0x0){if(_0x3b7d8c[_0x5e7c91(0x22f)]&&Array[_0x5e7c91(0x267)](_0x3b7d8c['Operations'])&&_0x3b7d8c['Operations'][_0x5e7c91(0x264)]>0x0)for(let _0x3e14cc=0x0;_0x3e14cc<_0x3b7d8c['Operations'][_0x5e7c91(0x264)];_0x3e14cc++){const _0x5c128c=_0x3b7d8c[_0x5e7c91(0x22f)][_0x3e14cc];if(_0x5c128c['op']===_0x5e7c91(0x25b)){if(_0x5c128c[_0x5e7c91(0x206)]){if(_0x5c128c[_0x5e7c91(0x206)][_0x5e7c91(0x1ea)](_0x5e7c91(0x276))&&_0x5c128c['typeId'])_0x3b7d8c[_0x5e7c91(0x26f)]=_0x5e7c91(0x255);else _0x5c128c[_0x5e7c91(0x206)]===_0x5e7c91(0x272)&&(_0x3b7d8c['activityOperation']=_0x5e7c91(0x255));}}}}}}if(!_0x5804ad){if(_0x3b7d8c['activityOperation']===_0x5e7c91(0x255)){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x1d8)+_0x4b2517+_0x5e7c91(0x207)),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}if(_0xc3dcd4[_0x5e7c91(0x298)]&&_0xc3dcd4['modifyOnly']===!![]){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+'\x20Create\x20userName='+_0x4b2517+_0x5e7c91(0x23f)),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+'\x20done'+_0x2d5297);return;}if(Object[_0x5e7c91(0x1ed)][_0x5e7c91(0x293)]['call'](_0x3a4a23,_0x5e7c91(0x1f1))){if(typeof _0x3a4a23[_0x5e7c91(0x1f1)]==='string'){const _0x8fc482=_0x3a4a23[_0x5e7c91(0x1f1)][_0x5e7c91(0x1e6)]();if(_0x8fc482===_0x5e7c91(0x22c))_0x3a4a23[_0x5e7c91(0x1f1)]=!![];else{if(_0x8fc482===_0x5e7c91(0x200))_0x3a4a23['active']=![];}}if(_0x3a4a23[_0x5e7c91(0x1f1)]===![]){_0x2d0b29['logger'][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x236)+_0x4b2517+_0x5e7c91(0x246)),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}}_0x2d0b29['logger'][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x1da)+_0x4b2517);const _0x4eb6bb=utils['copyObj'](_0x3a4a23);try{delete _0x4eb6bb[_0x5e7c91(0x272)];!_0x4eb6bb[_0x5e7c91(0x237)]&&_0xc3dcd4[_0x5e7c91(0x239)]&&_0xc3dcd4[_0x5e7c91(0x239)]===!![]&&(_0x4eb6bb['password']=utils[_0x5e7c91(0x24b)](0xf));if(_0x330090||_0x509d16){if(_0x330090)for(const _0x3a5604 in _0x330090){_0x4eb6bb[_0x3a5604]=_0x330090[_0x3a5604];}if(_0x509d16)_0x4eb6bb['id']=_0x509d16;await _0x32f9e0(_0x4eb6bb);}await _0x2d0b29[_0x5e7c91(0x284)](_0x4a7335,_0x4eb6bb),_0x3a4a23[_0x5e7c91(0x272)]&&Array[_0x5e7c91(0x267)](_0x3a4a23['groups'])&&_0x3a4a23['groups']['length']>0x0&&(_0x2856f2=await _0x593801(_0x5e7c91(0x233),_0x4b2517));}catch(_0x4da87b){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+'\x20createUser()\x20obj='+JSON[_0x5e7c91(0x1d1)](_0x4eb6bb)+_0x5e7c91(0x22e)+_0x4da87b[_0x5e7c91(0x225)]+'}'),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}}if(_0x5804ad||_0x2856f2){if(_0x3b7d8c['activityOperation']===_0x5e7c91(0x255)){if(_0xc3dcd4['modifyOnly']&&_0xc3dcd4['modifyOnly']===!![]){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x24d)+_0x5804ad+'\x20message:\x20user\x20not\x20deleted\x20because\x20of\x20configuration\x20modifyOnly=true'),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+'\x20done'+_0x2d5297);return;}_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x24d)+_0x5804ad);try{await _0x2d0b29[_0x5e7c91(0x255)](_0x4a7335,_0x5804ad);}catch(_0x5695fb){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+_0x5e7c91(0x24d)+_0x5804ad+_0x5e7c91(0x22e)+_0x5695fb[_0x5e7c91(0x225)]+'}'),_0x2d0b29['logger'][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}}else{if(_0x2856f2)_0x5804ad=_0x2856f2;_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x1f9)+_0x5804ad);const _0xdc6421={};_0xdc6421[_0x5e7c91(0x211)]=()=>{},_0xdc6421['originalUrl']=_0x4a7335?'/'+_0x4a7335+'/Users/'+_0x5804ad:'/Users/'+_0x5804ad,_0xdc6421[_0x5e7c91(0x271)]={},_0xdc6421[_0x5e7c91(0x271)]['id']=_0x5804ad,_0xdc6421['request']={},_0xdc6421[_0x5e7c91(0x23e)][_0x5e7c91(0x266)]=_0x3a4a23;try{await _0x2d0b29[_0x5e7c91(0x229)](_0xdc6421);}catch(_0x2c4762){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x1f9)+_0x5804ad+'\x20error:\x20'+_0x2c4762[_0x5e7c91(0x225)]),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}if(_0xdc6421[_0x5e7c91(0x280)]&&_0xdc6421['status']!==0xc8){if(_0xdc6421[_0x5e7c91(0x266)]){if(_0xdc6421[_0x5e7c91(0x266)][_0x5e7c91(0x263)]){let _0x59b389=_0xdc6421[_0x5e7c91(0x266)]['detail'];_0x59b389=_0x59b389[_0x5e7c91(0x23b)](_0x2d0b29[_0x5e7c91(0x24a)]+'['+_0x2d0b29[_0x5e7c91(0x1e3)]+']',''+_0x555590),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](''+_0x59b389);}else{if(_0xdc6421['body'][_0x5e7c91(0x294)]&&Array['isArray'](_0xdc6421[_0x5e7c91(0x266)][_0x5e7c91(0x294)])&&_0xdc6421['body'][_0x5e7c91(0x294)][_0x5e7c91(0x264)]>0x0){let _0x4222fc=_0xdc6421['body']['Errors'][0x0][_0x5e7c91(0x25e)];_0x4222fc=_0x4222fc[_0x5e7c91(0x23b)](_0x2d0b29[_0x5e7c91(0x24a)]+'['+_0x2d0b29['pluginName']+']',''+_0x555590),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](''+_0x4222fc);}}}}if(_0xc3dcd4['usePutSoftSync']){const [_0x14ec2e,_0x441fa5]=_0x2d0b29[_0x5e7c91(0x1ee)]({'Operations':_0x3b7d8c['Operations']});if(_0x441fa5){_0x2d0b29['logger'][_0x5e7c91(0x1dc)](_0x555590+_0x5e7c91(0x1f9)+_0x5804ad+_0x5e7c91(0x250)+_0x441fa5[_0x5e7c91(0x225)]),_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);return;}const _0x1320d1=[];if(_0x14ec2e[_0x5e7c91(0x276)]&&Array[_0x5e7c91(0x267)](_0x14ec2e['roles']))for(let _0x5d6cea=0x0;_0x5d6cea<_0x14ec2e['roles'][_0x5e7c91(0x264)];_0x5d6cea++){_0x14ec2e['roles'][_0x5d6cea]['operation']&&_0x14ec2e[_0x5e7c91(0x276)][_0x5d6cea]['operation']===_0x5e7c91(0x1e9)&&_0x1320d1[_0x5e7c91(0x21d)](_0x14ec2e[_0x5e7c91(0x276)][_0x5d6cea]);}if(_0x1320d1[_0x5e7c91(0x264)]>0x0)try{await _0x2d0b29['modifyUser'](_0x4a7335,_0x5804ad,{'roles':_0x1320d1});}catch(_0x44e999){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+'\x20Replace\x20User\x20id='+_0x5804ad+_0x5e7c91(0x21a)+_0x44e999[_0x5e7c91(0x225)]);}const _0x574f68=[];if(_0x14ec2e[_0x5e7c91(0x272)]&&Array[_0x5e7c91(0x267)](_0x14ec2e[_0x5e7c91(0x272)]))for(let _0x359e17=0x0;_0x359e17<_0x14ec2e[_0x5e7c91(0x272)]['length'];_0x359e17++){_0x14ec2e[_0x5e7c91(0x272)][_0x359e17][_0x5e7c91(0x297)]&&_0x14ec2e['groups'][_0x359e17][_0x5e7c91(0x297)]===_0x5e7c91(0x1e9)&&_0x574f68[_0x5e7c91(0x21d)](_0x14ec2e[_0x5e7c91(0x272)][_0x359e17]);}if(_0x574f68[_0x5e7c91(0x264)]>0x0)for(let _0x2f063a=0x0;_0x2f063a<_0x574f68['length'];_0x2f063a++){try{await _0x2d0b29[_0x5e7c91(0x230)](_0x4a7335,_0x574f68[_0x2f063a]['id'],{'members':[{'operation':_0x5e7c91(0x1e9),'value':_0x5804ad}]});}catch(_0x53883f){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x555590+_0x5e7c91(0x1f9)+_0x5804ad+_0x5e7c91(0x210)+_0x53883f[_0x5e7c91(0x225)]);}}}}}_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x27f)](_0x555590+_0x5e7c91(0x277)+_0x2d5297);}catch(_0x162a1b){_0x2d0b29[_0x5e7c91(0x289)][_0x5e7c91(0x1dc)](_0x2d0b29['gwName']+'['+_0x2d0b29[_0x5e7c91(0x1e3)]+_0x5e7c91(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x5e7c91(0x24c)+_0x162a1b['message']+'\x20=>\x20subscriber\x20not\x20activated'+_0x2d5297);}},_0x1d5e97=nats[_0x43d7eb(0x28c)](),_0x59553c=_0x276714['jetstream'](),_0x1eb9d5=(_0x43d7eb(0x20e)+_0x2d0b29[_0x43d7eb(0x1e3)]+'_'+_0x4a7335)[_0x43d7eb(0x215)]('*','#')['replaceAll']('>','##')['replaceAll']('.','_');let _0x40eaf5;const _0x59bfa0=async()=>{const _0x2b89da=_0x43d7eb;try{const _0x2bafe7=''+_0xc3dcd4[_0x2b89da(0x209)][_0x2b89da(0x25c)],_0x5180f2=await _0x276714['jetstreamManager'](),_0x32f581=async()=>{const _0x899af=_0x2b89da;let _0x5f45ca;try{_0x5f45ca=await _0x59553c[_0x899af(0x257)][_0x899af(0x292)](_0x2bafe7,_0x1eb9d5);}catch(_0xf0fbc4){await _0x5180f2[_0x899af(0x257)][_0x899af(0x28a)](_0x2bafe7,{'durable_name':_0x1eb9d5,'ack_policy':nats['AckPolicy'][_0x899af(0x286)],'deliver_policy':nats['DeliverPolicy'][_0x899af(0x285)],'deliver_group':_0xc3dcd4?.[_0x899af(0x209)]?.[_0x899af(0x28d)]||null,'filter_subject':_0x5a7645}),_0x5f45ca=await _0x59553c[_0x899af(0x257)]['get'](_0x2bafe7,_0x1eb9d5);}(_0x5a7645!==_0x5f45ca?.['_info']?.[_0x899af(0x25a)]?.[_0x899af(0x1d9)]||_0xc3dcd4?.[_0x899af(0x209)]?.[_0x899af(0x28d)]!==_0x5f45ca?.[_0x899af(0x238)]?.['config']?.[_0x899af(0x23d)])&&(await _0x5180f2[_0x899af(0x257)][_0x899af(0x283)](_0x2bafe7,_0x1eb9d5,{'deliver_group':_0xc3dcd4?.[_0x899af(0x209)]?.['queueGroup']||null,'filter_subject':_0x5a7645}),_0x5f45ca=await _0x59553c['consumers']['get'](_0x2bafe7,_0x1eb9d5)),_0x40eaf5=await _0x5f45ca[_0x899af(0x20c)]({'max_messages':0x64});};await _0x32f581();const _0x415dc1=async()=>{const _0x45f757=_0x2b89da;for await(const _0x575e51 of await _0x40eaf5['status']()){switch(_0x575e51[_0x45f757(0x1d0)]){case nats['ConsumerEvents'][_0x45f757(0x1e2)]:if(_0x575e51[_0x45f757(0x282)]===0x1)_0x2d0b29[_0x45f757(0x289)]['info'](_0x2d0b29[_0x45f757(0x24a)]+'['+_0x2d0b29[_0x45f757(0x1e3)]+_0x45f757(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x45f757(0x259)+_0x575e51[_0x45f757(0x1d0)]),_0x32f581();else _0x575e51[_0x45f757(0x282)]%0xa===0x0&&_0x2d0b29[_0x45f757(0x289)]['error'](_0x2d0b29['gwName']+'['+_0x2d0b29[_0x45f757(0x1e3)]+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+_0x45f757(0x268)+_0x575e51[_0x45f757(0x1d0)]+_0x45f757(0x235)+_0x575e51[_0x45f757(0x282)]);break;}}};_0x415dc1();for await(const _0x46b3e3 of _0x40eaf5){if(!_0x46b3e3[_0x2b89da(0x287)]||!_0x46b3e3[_0x2b89da(0x287)]['get'](_0x2b89da(0x22b))){_0x46b3e3['ack']();continue;}const _0x245ba8=_0x2d0b29[_0x2b89da(0x24a)]+'['+_0x2d0b29['pluginName']+']\x20subscriber['+_0x4a7335+']['+_0x46b3e3[_0x2b89da(0x231)]+']['+_0x40eaf5[_0x2b89da(0x24e)]()+']['+(_0x46b3e3[_0x2b89da(0x287)]?_0x46b3e3[_0x2b89da(0x287)]['get'](_0x2b89da(0x22b)):'')+']',_0x1dbe1b=_0x1d5e97['decode'](_0x46b3e3[_0x2b89da(0x282)]);await _0x5637ab(_0x245ba8,_0x1dbe1b),_0x46b3e3[_0x2b89da(0x26d)]();}}catch(_0x4afe87){_0x2d0b29['logger']['error'](_0x2d0b29[_0x2b89da(0x24a)]+'['+_0x2d0b29['pluginName']+_0x2b89da(0x1f2)+_0x4a7335+']['+_0x5a7645+']\x20subscriber\x20stopped\x20error:\x20'+_0x4afe87[_0x2b89da(0x225)]);}};_0x59bfa0();const _0x5a50e8=async()=>{const _0x53eda2=_0x43d7eb;let _0x7531bc=0x0;for await(const _0x2bc5ca of _0x276714[_0x53eda2(0x280)]()){switch(_0x2bc5ca[_0x53eda2(0x1d0)]){case nats[_0x53eda2(0x21c)][_0x53eda2(0x1cb)]:_0x2d0b29[_0x53eda2(0x289)][_0x53eda2(0x1dc)](_0x2d0b29[_0x53eda2(0x24a)]+'['+_0x2d0b29[_0x53eda2(0x1e3)]+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+_0x53eda2(0x20a)+_0x2bc5ca['data']+_0x53eda2(0x234)),_0x7531bc=0x0;break;case nats['Events']['Reconnect']:_0x2d0b29[_0x53eda2(0x289)][_0x53eda2(0x1dd)](_0x2d0b29[_0x53eda2(0x24a)]+'['+_0x2d0b29['pluginName']+_0x53eda2(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x53eda2(0x244)+_0x2bc5ca['data']);try{if(_0x40eaf5[_0x53eda2(0x26c)])await _0x40eaf5['consumerInfo']();}catch(_0x4a0cb8){if(_0x40eaf5[_0x53eda2(0x220)])_0x40eaf5['unsubscribe']();}break;case nats[_0x53eda2(0x21c)][_0x53eda2(0x288)]:_0x2d0b29['logger']['error'](_0x2d0b29[_0x53eda2(0x24a)]+'['+_0x2d0b29[_0x53eda2(0x1e3)]+_0x53eda2(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x53eda2(0x251)+_0x2bc5ca['data']);break;case nats['DebugEvents'][_0x53eda2(0x273)]:_0x7531bc+=0x1;_0x7531bc%0x1e===0x0&&_0x2d0b29[_0x53eda2(0x289)][_0x53eda2(0x27f)](_0x2d0b29['gwName']+'['+_0x2d0b29['pluginName']+']\x20subscriber['+_0x4a7335+']['+_0x5a7645+_0x53eda2(0x24f)+_0x2bc5ca[_0x53eda2(0x282)]+'\x20(count='+_0x7531bc+')');break;case nats['DebugEvents']['StaleConnection']:_0x2d0b29[_0x53eda2(0x289)]['debug'](_0x2d0b29[_0x53eda2(0x24a)]+'['+_0x2d0b29['pluginName']+_0x53eda2(0x1f2)+_0x4a7335+']['+_0x5a7645+_0x53eda2(0x201)+_0x2bc5ca['data']);break;}}};_0x5a50e8(),process['on']('SIGTERM',async()=>{_0x276714&&await _0x276714['drain']();}),process['on'](_0x43d7eb(0x202),async()=>{_0x276714&&await _0x276714['drain']();});};const _0x593801=async(_0x382d36,_0x2d3277)=>{const _0x27ab3f=_0x461b07,_0x99938f={'attribute':_0x382d36,'operator':'eq','value':_0x2d3277,'rawFilter':undefined,'startIndex':undefined,'count':undefined},_0x15b0d7=[_0x382d36];if(_0x382d36!=='id')_0x15b0d7[_0x27ab3f(0x21d)]('id');try{const _0x786c1c=await _0x2d0b29[_0x27ab3f(0x1f6)](_0x4a7335,_0x99938f,_0x15b0d7);if(!_0x786c1c||!_0x786c1c[_0x27ab3f(0x253)]||!Array['isArray'](_0x786c1c['Resources']))throw new Error(_0x27ab3f(0x1f8)+JSON[_0x27ab3f(0x1d1)](_0x99938f)+_0x27ab3f(0x1db));if(_0x786c1c[_0x27ab3f(0x253)][_0x27ab3f(0x264)]===0x0)return null;else{if(_0x786c1c[_0x27ab3f(0x253)][_0x27ab3f(0x264)]>0x2)throw new Error(_0x27ab3f(0x1f8)+JSON[_0x27ab3f(0x1d1)](_0x99938f)+_0x27ab3f(0x1fa));else{const _0x165373=_0x786c1c[_0x27ab3f(0x253)][0x0];if(!_0x165373['id'])throw new Error(_0x27ab3f(0x1f8)+JSON[_0x27ab3f(0x1d1)](_0x99938f)+_0x27ab3f(0x240)+JSON[_0x27ab3f(0x1d1)](_0x165373)+_0x27ab3f(0x228));return decodeURIComponent(_0x165373['id']);}}}catch(_0x5da8eb){throw new Error(_0x27ab3f(0x1f8)+JSON[_0x27ab3f(0x1d1)](_0x99938f)+'\x20error:\x20'+_0x5da8eb[_0x27ab3f(0x225)]+'}');}},_0x5a0b97=_0xfbfd24=>{const _0x2b1962=_0x461b07;if(!_0xfbfd24||typeof _0xfbfd24!==_0x2b1962(0x278))return[null,null];_0xfbfd24=_0xfbfd24[_0x2b1962(0x1df)]();const _0x5d863d=_0xfbfd24[_0x2b1962(0x1ff)]('(');if(_0x5d863d<0x1)return[null,null];if(_0xfbfd24['substring'](_0xfbfd24[_0x2b1962(0x264)]-0x1)!==')')return[null,null];if(_0x100ffa(_0xfbfd24,'(')!==_0x100ffa(_0xfbfd24,')'))return[null,null];const _0x335b3f=_0xfbfd24[_0x2b1962(0x1f7)](0x0,_0x5d863d),_0x5b0aab=_0xfbfd24[_0x2b1962(0x1f7)](_0x5d863d+0x1,_0xfbfd24[_0x2b1962(0x264)]-0x1);let _0x367d59=[];const _0x3899ff=_0x5b0aab[_0x2b1962(0x27a)](',');let _0x3b692c='';for(let _0x4096b9=0x0;_0x4096b9<_0x3899ff[_0x2b1962(0x264)];_0x4096b9++){const _0x5a59cc=_0x3b692c?_0x3b692c+','+_0x3899ff[_0x4096b9]:_0x3899ff[_0x4096b9],_0x4c2b1d=_0x100ffa(_0x5a59cc,'('),_0x12ee6b=_0x100ffa(_0x5a59cc,')');if(_0x4c2b1d===_0x12ee6b)_0x367d59['push'](_0x5bfb85(_0x5a59cc,'\x22')),_0x3b692c='';else{if(_0x3b692c)_0x3b692c+=','+_0x3899ff[_0x4096b9];else _0x3b692c+=_0x3899ff[_0x4096b9];}}if(_0x367d59[_0x2b1962(0x264)]===0x0)_0x367d59=null;return[_0x335b3f,_0x367d59];};function _0x100ffa(_0x271210,_0xdfe5bb){const _0x1f8b05=_0x461b07;let _0x30a213=0x0;for(let _0x302246=0x0;_0x302246<_0x271210[_0x1f8b05(0x264)];_0x302246++){_0x271210[_0x1f8b05(0x291)](_0x302246)===_0xdfe5bb&&(_0x30a213+=0x1);}return _0x30a213;}const _0x5bfb85=(_0x151f43,_0x20fdb6)=>{const _0x215f04=_0x461b07;if(typeof _0x151f43!=='string'||typeof _0x20fdb6!==_0x215f04(0x278))return _0x151f43;if(_0x151f43[_0x215f04(0x264)]===0x1)return _0x151f43;if(_0x20fdb6[_0x215f04(0x264)]!==0x1)return _0x151f43;return _0x151f43=_0x151f43[_0x215f04(0x1df)](),_0x151f43[_0x215f04(0x1f7)](0x0,0x1)===_0x20fdb6&&(_0x151f43=_0x151f43[_0x215f04(0x1f7)](0x1)),_0x151f43[_0x215f04(0x1f7)](_0x151f43['length']-0x1)===_0x20fdb6&&(_0x151f43=_0x151f43[_0x215f04(0x1f7)](0x0,_0x151f43['length']-0x1)),_0x151f43;},_0x41a21b=async(_0x45ab7a,_0x1d2460,_0x5b0890)=>{const _0x52907c=_0x461b07;if(!_0x45ab7a||!_0x1d2460||!_0x5b0890)return null;const [_0x41fadf,_0x3f6db3]=_0x5a0b97(_0x5b0890);if(!_0x41fadf||!_0x3f6db3){const _0x4e9001=_0x5b0890['split']('(');if(_0x4e9001['length']>0x1){const _0x40f640=[_0x52907c(0x261),'uppercase',_0x52907c(0x265),'elementnumber',_0x52907c(0x20f),_0x52907c(0x23b),_0x52907c(0x274),_0x52907c(0x22d),_0x52907c(0x21e)],_0x55b90a=_0x4e9001[0x0][_0x52907c(0x1e6)]();if(_0x40f640[_0x52907c(0x27c)](_0x55b90a))return null;}return _0x5b0890;}for(let _0x3f83a3=0x0;_0x3f83a3<_0x3f6db3['length'];_0x3f83a3++){if(_0x3f6db3[_0x3f83a3][_0x52907c(0x1f7)](0x0,0x1)==='['){const _0x3e578a=_0x3f6db3[_0x3f83a3][_0x52907c(0x1ff)](']');if(_0x3e578a<0x0)return null;const _0x4926bf=_0x3f6db3[_0x3f83a3][_0x52907c(0x1f7)](0x1,_0x3e578a),_0x32032d=_0x4926bf[_0x52907c(0x27a)]('.');let _0x29a30c;for(let _0x1882cc=0x0;_0x1882cc<_0x32032d[_0x52907c(0x264)];_0x1882cc++){if(_0x1882cc===0x0)_0x29a30c=_0x45ab7a[_0x32032d[_0x1882cc]];else{if(!_0x29a30c)return null;_0x29a30c=_0x29a30c[_0x32032d[_0x1882cc]];}}if(!_0x29a30c)return null;_0x3f6db3[_0x3f83a3]=_0x29a30c;}}for(let _0x1779b0=0x0;_0x1779b0<_0x3f6db3['length'];_0x1779b0++){const [_0x312d40]=_0x5a0b97(_0x3f6db3[_0x1779b0]);_0x312d40&&(_0x3f6db3[_0x1779b0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x3f6db3[_0x1779b0]));}if(_0x3f6db3[0x0]===null)return null;switch(_0x41fadf[_0x52907c(0x1e6)]()){case _0x52907c(0x261):{if(_0x3f6db3[_0x52907c(0x264)]!==0x1)return null;const [_0x1c8bed]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x1c8bed)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x1c8bed);if(_0x3f6db3[0x0]===null)return null;return _0x3f6db3[0x0][_0x52907c(0x1e6)]();}case _0x52907c(0x208):{if(_0x3f6db3[_0x52907c(0x264)]!==0x1)return null;const [_0x2b59c1]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x2b59c1)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x2b59c1);if(_0x3f6db3[0x0]===null)return null;return _0x3f6db3[0x0][_0x52907c(0x28e)]();}case _0x52907c(0x265):{if(_0x3f6db3[_0x52907c(0x264)]!==0x2)return null;const [_0x20d91c]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x20d91c)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x20d91c);if(_0x3f6db3[0x0]===null)return null;if(isNaN(_0x3f6db3[0x1]))return null;return _0x3f6db3[0x0][_0x52907c(0x1f7)](0x0,_0x3f6db3[0x1]);}case'elementnumber':{const [_0x2964d9]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x3f6db3[_0x52907c(0x264)]<0x2)return null;if(_0x2964d9)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x2964d9);if(_0x3f6db3[0x0]===null)return null;const _0x278ede=_0x3f6db3[0x1];if(isNaN(_0x278ede))return null;let _0x58c155;if(_0x3f6db3[_0x52907c(0x264)]===0x3)_0x58c155=_0x3f6db3[0x0][_0x52907c(0x27a)](_0x3f6db3[0x2]);else _0x58c155=_0x58c155=_0x3f6db3[0x0]['split']('\x20');if(_0x278ede<=_0x58c155[_0x52907c(0x264)])return _0x58c155[_0x278ede-0x1];else return'';}case _0x52907c(0x23b):{const [_0xe9c5db]=_0x5a0b97(_0x3f6db3[0x0]);if(_0xe9c5db)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0xe9c5db);if(_0x3f6db3[0x0]===null)return null;if(_0x3f6db3[_0x52907c(0x264)]!==0x3)return null;return _0x3f6db3[0x0][_0x52907c(0x215)](_0x3f6db3[0x1],_0x3f6db3[0x2]);}case _0x52907c(0x274):{if(_0x3f6db3[_0x52907c(0x264)]!==0x1)return null;const [_0x2cb869]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x2cb869)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x2cb869);if(_0x3f6db3[0x0]===null)return null;return ascii127[_0x52907c(0x260)](_0x3f6db3[0x0]);}case _0x52907c(0x20f):{let _0xe9561f='';for(let _0x5d2ba0=0x0;_0x5d2ba0<_0x3f6db3['length'];_0x5d2ba0++){const [_0x588017]=_0x5a0b97(_0x3f6db3[_0x5d2ba0]);if(_0x588017)_0x3f6db3[_0x5d2ba0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x588017);if(_0x3f6db3[_0x5d2ba0]===null)return null;_0xe9561f+=_0x3f6db3[_0x5d2ba0];}return _0xe9561f;}case _0x52907c(0x22d):{if(_0x3f6db3['length']>0x2)return null;const [_0x3b8de9]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x3b8de9)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x3b8de9);if(_0x3f6db3[0x0]===null)return null;const _0x1df101=parseInt(_0x3f6db3[0x0]);if(isNaN(_0x1df101))return null;let _0x4c3bc2=_0x52907c(0x243);_0x4c3bc2+=','+_0x3f6db3[0x0];if(_0x3f6db3[_0x52907c(0x264)]===0x2&&_0x3f6db3[0x1][_0x52907c(0x1e6)]()==='true')_0x4c3bc2+=_0x52907c(0x1e8);else _0x4c3bc2+=_0x52907c(0x1f0);return _0x4c3bc2+='##',_0x4c3bc2;}case'getuniquevalue':{if(_0x3f6db3['length']!==0x1)return null;const [_0x3f5c8e]=_0x5a0b97(_0x3f6db3[0x0]);if(_0x3f5c8e)_0x3f6db3[0x0]=await _0x41a21b(_0x45ab7a,_0x1d2460,_0x3f5c8e);if(_0x3f6db3[0x0]===null)return null;let _0x4a466b,_0x2a03aa=![],_0x2c24e7='';const _0x33ae9e=_0x3f6db3[0x0]['split']('##');if(_0x33ae9e[_0x52907c(0x264)]>0x2)for(let _0x10bf63=0x0;_0x10bf63<_0x33ae9e['length'];_0x10bf63++){if(_0x33ae9e[_0x10bf63][_0x52907c(0x1ea)](_0x52907c(0x1cc))){const _0x57b1b6=_0x33ae9e[_0x10bf63][_0x52907c(0x27a)](',');if(_0x57b1b6[_0x52907c(0x264)]<0x2)return null;const _0x5f1985=parseInt(_0x57b1b6[0x1]);if(isNaN(_0x5f1985))return null;_0x2c24e7='##'+_0x33ae9e[_0x10bf63]+'##',_0x4a466b=_0x57b1b6[0x1],_0x57b1b6[_0x52907c(0x264)]>0x2&&(_0x2a03aa=_0x57b1b6[0x2]['toLowerCase']()==='true');}}let _0x31ede8,_0x4125dc=0x0,_0x283e64=0x0;if(_0x4a466b){_0x283e64=_0x4a466b['length'],_0x4125dc=0xa;for(let _0x5cdade=0x1;_0x5cdade<_0x283e64;_0x5cdade++){_0x4125dc*=0xa;}_0x4125dc-=0x1,_0x31ede8=parseInt(_0x4a466b);if(isNaN(_0x31ede8))return null;_0x31ede8-=0x1;}else _0x31ede8=0x0;do{_0x31ede8+=0x1;let _0x12ce62=_0x3f6db3[0x0];if(_0x4a466b!==undefined&&_0x2c24e7){let _0x3d0cd8=_0x31ede8['toString']();while(_0x3d0cd8[_0x52907c(0x264)]<_0x283e64){_0x3d0cd8='0'+_0x3d0cd8;}_0x2a03aa?_0x12ce62=_0x12ce62[_0x52907c(0x23b)](_0x2c24e7,_0x3d0cd8):(_0x12ce62=_0x12ce62[_0x52907c(0x23b)](_0x2c24e7,''),_0x2a03aa=!![],_0x31ede8-=0x1);}try{const _0x56e7fb=await _0x593801(_0x1d2460,_0x12ce62);if(!_0x56e7fb)return _0x12ce62;}catch(_0x5163ae){return _0x2d0b29[_0x52907c(0x289)][_0x52907c(0x1dc)](_0x2d0b29[_0x52907c(0x24a)]+'['+_0x2d0b29['pluginName']+']\x20'+_0x41fadf+_0x52907c(0x27e)+_0x5163ae['message']),null;}}while(_0x31ede8<_0x4125dc);return null;}default:}return null;},_0x32f9e0=async _0x3528d2=>{const _0x3c76b8=_0x461b07;for(const _0x193735 in _0x3528d2){const _0x98e83c=_0x3528d2[_0x193735],[_0x591d5d,_0x49b98c]=_0x5a0b97(_0x98e83c);if(_0x591d5d){const _0x5a282b=''+_0x193735,_0x1d805c=_0x591d5d+'('+_0x49b98c[_0x3c76b8(0x20f)](',')+')',_0x30cb79=await _0x41a21b(_0x3528d2,_0x5a282b,_0x1d805c);if(_0x30cb79===null)delete _0x3528d2[_0x193735];else _0x3528d2[_0x193735]=_0x30cb79;}for(const _0x47da91 in _0x98e83c){const _0x2c5d4f=_0x98e83c[_0x47da91],[_0x3c08ea,_0x3f9fdc]=_0x5a0b97(_0x2c5d4f);if(_0x3c08ea){const _0x2be80e=_0x193735+'.'+_0x47da91,_0x25475d=_0x3c08ea+'('+_0x3f9fdc[_0x3c76b8(0x20f)](',')+')',_0x7953f1=await _0x41a21b(_0x3528d2,_0x2be80e,_0x25475d);if(_0x7953f1===null)delete _0x98e83c[_0x47da91];else _0x98e83c[_0x47da91]=_0x7953f1;}}}return _0x3528d2;};},module[a0_0x20b93f(0x290)][a0_0x20b93f(0x1d3)]=async(_0x5c6853,_0x2f5c49,_0x26adbe,_0x42a22a)=>{const _0x4f4f1f=a0_0x20b93f,_0x51f644=_0x4f4f1f(0x1d3),_0x178a2f=_0x5c6853;_0x178a2f[_0x4f4f1f(0x289)][_0x4f4f1f(0x27f)](_0x178a2f[_0x4f4f1f(0x24a)]+'['+_0x178a2f[_0x4f4f1f(0x1e3)]+_0x4f4f1f(0x1f4)+_0x51f644+'\x22');try{if(!fs['existsSync'](_0x178a2f['configDir']+'/approles'))fs[_0x4f4f1f(0x1e7)](_0x178a2f[_0x4f4f1f(0x218)]+_0x4f4f1f(0x227));}catch(_0x24c2ec){}const _0x4573d8=path['join'](''+_0x178a2f['configDir'],_0x4f4f1f(0x25d),_0x4f4f1f(0x21f)+_0x178a2f[_0x4f4f1f(0x1e3)]+'_autogenerated.cfg'),_0x548cfb={};utils[_0x4f4f1f(0x27b)](_0x4573d8)&&fs[_0x4f4f1f(0x1ce)](_0x4573d8,'utf-8')['split'](/\r?\n/)[_0x4f4f1f(0x1ca)](_0x5e2e97=>{const _0x2abe45=_0x4f4f1f,_0x26d292=_0x5e2e97['split']('\x20');_0x26d292[_0x2abe45(0x264)]===0x2&&(_0x548cfb[_0x26d292[0x0]]=_0x26d292[0x1]);});const _0x346ae4=fs[_0x4f4f1f(0x21b)](_0x4573d8,{'flags':'w','encoding':_0x4f4f1f(0x254),'mode':0x1b6,'autoClose':!![]}),_0xe65087=[],_0x39b1ae=await _0x178a2f[_0x4f4f1f(0x23c)](_0x2f5c49,{'attribute':undefined,'operator':undefined,'value':undefined},['id',_0x4f4f1f(0x1e4)]);return _0x39b1ae[_0x4f4f1f(0x253)][_0x4f4f1f(0x1ca)](_0x21fa7b=>{const _0x47e197=_0x4f4f1f;if(_0x21fa7b['id']){let _0x438aac=crypto[_0x47e197(0x20b)]();if(_0x548cfb[_0x21fa7b['id']])_0x438aac=_0x548cfb[_0x21fa7b['id']];const _0x308738={'allowedMemberTypes':[_0x47e197(0x1cd)],'description':'SCIM\x20Stream\x20-\x20Autogenerated','displayName':_0x21fa7b[_0x47e197(0x1e4)]||_0x21fa7b['id'],'id':_0x438aac,'isEnabled':!![],'lang':null,'origin':_0x47e197(0x26e),'value':decodeURIComponent(_0x21fa7b['id'])};_0xe65087[_0x47e197(0x21d)](_0x308738),_0x346ae4[_0x47e197(0x1d4)](_0x21fa7b['id']+'\x20'+_0x438aac+'\x0a');}}),_0x346ae4['close'](),_0x178a2f['logger']['debug'](_0x178a2f[_0x4f4f1f(0x24a)]+'['+_0x178a2f[_0x4f4f1f(0x1e3)]+']\x20approle\x20uuid\x20file\x20created:\x20'+_0x4573d8),{'Resources':[{'appRoles':_0xe65087}]};};