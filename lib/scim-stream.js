// ================================================================
// File:    scim-stream.js
//
// Author:  Jarle Elshaug
//
// Purpose: SCIM Stream message subscription and automated provisioning
//          getApproles() for exporting all groups into Entra ID AppRole manifest-format
//
// Note: SCIM Stream is a prerequisite for message subscription
//       for details see: https://elshaug.xyz/docs/scim-stream
//
// ================================================================
'use strict';const a0_0x2b18c7=a0_0x485a;(function(_0x2cad0c,_0x1253e6){const _0x297f57=a0_0x485a,_0x4e5f53=_0x2cad0c();while(!![]){try{const _0x2b7bff=-parseInt(_0x297f57(0x1fa))/0x1*(parseInt(_0x297f57(0x1a0))/0x2)+-parseInt(_0x297f57(0x1e5))/0x3+parseInt(_0x297f57(0x218))/0x4*(parseInt(_0x297f57(0x1ba))/0x5)+parseInt(_0x297f57(0x20b))/0x6*(-parseInt(_0x297f57(0x20e))/0x7)+-parseInt(_0x297f57(0x1e0))/0x8+-parseInt(_0x297f57(0x21a))/0x9*(-parseInt(_0x297f57(0x201))/0xa)+parseInt(_0x297f57(0x234))/0xb;if(_0x2b7bff===_0x1253e6)break;else _0x4e5f53['push'](_0x4e5f53['shift']());}catch(_0x7dfb68){_0x4e5f53['push'](_0x4e5f53['shift']());}}}(a0_0x3831,0x9362f));function a0_0x485a(_0x1421bf,_0x20f3d6){const _0x3831c4=a0_0x3831();return a0_0x485a=function(_0x485a10,_0x15f8d4){_0x485a10=_0x485a10-0x180;let _0x42de61=_0x3831c4[_0x485a10];return _0x42de61;},a0_0x485a(_0x1421bf,_0x20f3d6);}function a0_0x3831(){const _0x201a67=['password','configDir','readFileSync','Error','getuniquevalue','\x20message:\x20user\x20does\x20not\x20exist','level','decode','delete','\x20roles\x20converted\x20to\x20groups\x20message:\x20','subscribe','Disconnect','AckPolicy','headers','isArray','waitOnFirstConnect','description','maxPingOut','data','value',']\x20connected\x20','connect','\x20missing\x20mandatory\x20user.userName\x20in\x20message:\x20','getServer','pingInterval','Reconnecting','maxReconnectAttempts','\x20Delete\x20User\x20id=','\x20should\x20have\x20syntax:\x20<collector>.<channel>','\x20convertedScim20\x20error:\x20','Msg-Id','replace','toLowerCase','drain','\x20missing\x20user\x20object\x20in\x20message:\x20','User','consumerInfo','roles',']\x20error:\x20client\x20have\x20not\x20been\x20initialized','join','substring','1003396hqFtib','getUsers()\x20getObj=',']\x20subscriber[','existsSync','subject','length','activityOperation','userName','write','getGroups','fsExistsSync','authenticator','trim','ConsumerNotFound','\x20Create\x20userName=','replaceAll','StringCodec',']\x20error:\x20subject\x20','modifyUser','\x20error:\x20missing\x20result','deleteUser','Resources','string','true','createWriteStream','filter_subject','5bECcui','\x20done','doIncrement',']\x20subscriber\x20error:\x20missing\x20certificate\x20configuration','Operations','startsWith','display','\x20-\x20','transports',']\x20handling\x20\x22',']\x20client\x20consumer\x20reinitiated\x20because\x20of\x20','Errors','originalUrl',']\x20closed\x20with\x20error:\x20','\x20createUser()\x20obj=','jetstream','push',']\x20client\x20disconnected\x20','hasOwnProperty','add','lowercase','\x20message:\x20user\x20not\x20created\x20because\x20of\x20active=false','utf8','operation','active','certificate','prototype','config','consumers','\x20-\x20will\x20do\x20auto\x20connect\x20when\x20available\x20-\x20however,\x20please\x20verify\x20stream\x20configuration','\x20Delete\x20User\x20userName=','approles_','\x20error:\x20more\x20than\x20one\x20user\x20were\x20found}','convertedScim20','mkdirSync',']\x20subscriber\x20certificate\x20error:\x20','body','SCIM\x20Stream\x20-\x20Autogenerated','8528152vcNqUV','onCreate','debug','New','pluginName','2972889qzDvCr','consume','../lib/utils','Events','SIGTERM','\x20message\x20json\x20parsing\x20error:\x20','typeId',']\x20error:\x20','close','durable_','get','\x20count=','toUpperCase','getAppRoles','crypto','\x20handling\x20message:\x20','baseUrls',']\x20approle\x20uuid\x20file\x20created:\x20','message','status','approles','1VKNZdL',']\x20client\x20consumer\x20error:\x20','set','ConsumerEvents','\x20Create\x20User\x20userName=','request','normalize','1215310qpusXu','then','\x20error:\x20missing\x20id}','type','split',']\x20connect\x20error:\x20','displayName','logger','replaceDomains','update','95838hWwfEp',']\x20client\x20has\x20a\x20stale\x20connection\x20','\x20Replace\x20User\x20id=','91ddtLAo',']\x20subscriber\x20stopped\x20error:\x20','stringify','\x20error:\x20','increment','detail','Explicit','copyObj','params','\x20-\x20will\x20do\x20auto\x20reconnect\x20when\x20connection\x20becomes\x20available','3071256mPrlbu','parse','18RythPR','Reconnect','toString','path','info','SIGINT','forEach','groups','ack','gwName','createRandomPassword','createUser','firstn','exports','from','\x20result=','jwtAuthenticator',']\x20client\x20is\x20attempting\x20to\x20reconnect\x20','jwt','tenant','utf-8','DebugEvents','generateUserPassword','nats','modifyOnly','unsubscribe','25950628vrgSNu','\x20getUserId()\x20error:\x20','fold-to-ascii','error','foldReplacing','\x20(count=','\x20message:\x20user\x20not\x20deleted\x20because\x20of\x20configuration\x20modifyOnly=true','queueGroup','Application','includes','closed','secret','reconnect','indexOf','tls','_info'];a0_0x3831=function(){return _0x201a67;};return a0_0x3831();}const nats=require('nats'),ascii127=require(a0_0x2b18c7(0x236)),fs=require('fs'),utils=require(a0_0x2b18c7(0x1e7)),path=require(a0_0x2b18c7(0x21d)),crypto=require(a0_0x2b18c7(0x1f3));module[a0_0x2b18c7(0x227)]['Subscriber']=function(_0x4fd2f0,_0x27c986,_0x5f2569,_0x5675f0){const _0x11841c=a0_0x2b18c7,_0x270119=_0x4fd2f0,_0x179084=_0x27c986,_0x5c87b4=_0x5f2569,_0x4f1028=_0x5675f0;if(!_0x179084[_0x11841c(0x1d3)]||!_0x179084[_0x11841c(0x1d3)]['ca']){_0x270119[_0x11841c(0x208)][_0x11841c(0x237)](_0x270119[_0x11841c(0x223)]+'['+_0x270119[_0x11841c(0x1e4)]+_0x11841c(0x1bd));return;}if(!_0x179084['usePutSoftSync']){_0x270119[_0x11841c(0x208)][_0x11841c(0x237)](_0x270119[_0x11841c(0x223)]+'['+_0x270119[_0x11841c(0x1e4)]+']\x20subscriber\x20error:\x20configuration\x20scim.usePutSoftSync\x20must\x20be\x20set\x20to\x20true');return;}let _0x291f12='';for(let _0x39b89f=0x0;_0x39b89f<_0x270119[_0x11841c(0x208)][_0x11841c(0x1c2)]['length'];_0x39b89f++){if(_0x270119[_0x11841c(0x208)][_0x11841c(0x1c2)][_0x39b89f]['name']==='file'){_0x291f12=_0x270119[_0x11841c(0x208)][_0x11841c(0x1c2)][_0x39b89f][_0x11841c(0x24a)];break;}}const _0x24597f=''+(_0x291f12===_0x11841c(0x1e2)?'\x0a':''),_0x212b3b={};try{_0x212b3b['ca']=[fs[_0x11841c(0x246)](_0x270119[_0x11841c(0x245)]+'/certs/'+_0x179084[_0x11841c(0x1d3)]['ca'])];}catch(_0x15bcd0){_0x270119[_0x11841c(0x208)]['error'](_0x270119[_0x11841c(0x223)]+'['+_0x270119[_0x11841c(0x1e4)]+_0x11841c(0x1dd)+_0x15bcd0[_0x11841c(0x1f7)]);return;}const _0x43687d={},_0x574f21=new TextEncoder()['encode'](_0x179084[_0x11841c(0x231)][_0x11841c(0x23f)]),_0x1abc7b=_0x179084[_0x11841c(0x231)][_0x11841c(0x22c)];_0x43687d[_0x11841c(0x1ab)]=nats[_0x11841c(0x22a)](_0x1abc7b,_0x574f21),_0x43687d['servers']=_0x179084[_0x11841c(0x1f5)],_0x43687d[_0x11841c(0x242)]=_0x212b3b,_0x43687d[_0x11841c(0x186)]=![],_0x43687d[_0x11841c(0x240)]=!![],_0x43687d['reconnectTimeWait']=0x3e8*0xa,_0x43687d[_0x11841c(0x191)]=-0x1,_0x43687d[_0x11841c(0x18f)]=0x2*0x3c*0x3e8,_0x43687d[_0x11841c(0x188)]=0x5,_0x43687d[_0x11841c(0x1e2)]=![];let _0x455a85;this[_0x11841c(0x18c)]=async()=>{const _0x2081ea=_0x11841c;try{_0x455a85=await nats['connect'](_0x43687d);}catch(_0x37d009){_0x270119[_0x2081ea(0x208)][_0x2081ea(0x237)](_0x270119['gwName']+'['+_0x270119[_0x2081ea(0x1e4)]+_0x2081ea(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x2081ea(0x206)+_0x37d009[_0x2081ea(0x1f7)]+_0x2081ea(0x1d7)),_0x43687d[_0x2081ea(0x186)]=!![];try{_0x455a85=await nats['connect'](_0x43687d);}catch(_0x2a8b5e){_0x270119[_0x2081ea(0x208)][_0x2081ea(0x237)](_0x270119[_0x2081ea(0x223)]+'['+_0x270119[_0x2081ea(0x1e4)]+_0x2081ea(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x2081ea(0x206)+_0x2a8b5e[_0x2081ea(0x1f7)]);return;}}_0x270119[_0x2081ea(0x208)][_0x2081ea(0x21e)](_0x270119[_0x2081ea(0x223)]+'['+_0x270119[_0x2081ea(0x1e4)]+_0x2081ea(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x2081ea(0x18b)+(_0x43687d[_0x2081ea(0x242)]['ca']?_0x2081ea(0x242):'')+'\x20'+_0x455a85[_0x2081ea(0x18e)]()),_0x455a85[_0x2081ea(0x23e)]()[_0x2081ea(0x202)](_0x53b501=>{const _0x672ca5=_0x2081ea;_0x53b501&&_0x270119['logger']['error'](_0x270119[_0x672ca5(0x223)]+'['+_0x270119['pluginName']+_0x672ca5(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x672ca5(0x1c7)+_0x53b501[_0x672ca5(0x1f7)]);});},this[_0x11841c(0x181)]=async()=>{const _0x2927e1=_0x11841c;if(!_0x4f1028||!_0x179084[_0x2927e1(0x1f5)]||!_0x179084[_0x2927e1(0x1d3)]||!_0x179084[_0x2927e1(0x1d3)]['ca']||!_0x179084[_0x2927e1(0x231)]||!_0x179084[_0x2927e1(0x231)][_0x2927e1(0x22d)]||!_0x179084[_0x2927e1(0x231)]['secret']||!_0x179084[_0x2927e1(0x231)][_0x2927e1(0x22c)]){_0x270119[_0x2927e1(0x208)][_0x2927e1(0x237)](_0x270119[_0x2927e1(0x223)]+'['+_0x270119['pluginName']+_0x2927e1(0x1a2)+_0x5c87b4+']['+_0x4f1028+']\x20error:\x20missing\x20one\x20or\x20more\x20mandatory\x20configurations\x20e.g.\x20stream.baseUrls,\x20stream.certificate.ca,\x20nats.tenant,\x20nats.subject,\x20nats.secret\x20and\x20nats.jwt');return;}if(_0x4f1028[_0x2927e1(0x205)]('.')[_0x2927e1(0x1a5)]<0x2){_0x270119[_0x2927e1(0x208)][_0x2927e1(0x237)](_0x270119[_0x2927e1(0x223)]+'['+_0x270119[_0x2927e1(0x1e4)]+_0x2927e1(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x2927e1(0x1b1)+_0x4f1028+_0x2927e1(0x193));return;}if(_0x4f1028['includes'](',')){_0x270119[_0x2927e1(0x208)][_0x2927e1(0x237)](_0x270119[_0x2927e1(0x223)]+'['+_0x270119[_0x2927e1(0x1e4)]+_0x2927e1(0x1a2)+_0x5c87b4+']['+_0x4f1028+']\x20error:\x20subject\x20not\x20allowing\x20comma\x20separated\x20multiples');return;}if(!_0x455a85){_0x270119[_0x2927e1(0x208)][_0x2927e1(0x237)](_0x270119[_0x2927e1(0x223)]+'['+_0x270119['pluginName']+_0x2927e1(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x2927e1(0x19d));return;}const _0x293d39=async(_0xe21f07,_0x5ac980)=>{const _0x147f04=_0x2927e1;try{_0x270119[_0x147f04(0x208)][_0x147f04(0x21e)](_0xe21f07+_0x147f04(0x1f4)+_0x5ac980);let _0x5bc74a;try{if(_0x179084[_0x147f04(0x209)]&&Array[_0x147f04(0x185)](_0x179084[_0x147f04(0x209)]))for(let _0x245965=0x0;_0x245965<_0x179084[_0x147f04(0x209)]['length'];_0x245965++){const _0x5bb326=_0x179084[_0x147f04(0x209)][_0x245965];if(!_0x5bb326['from']||!_0x5bb326[_0x147f04(0x228)]['includes']('.')||!_0x5bb326['to']||!_0x5bb326['to'][_0x147f04(0x23d)]('.'))continue;const _0x5c2518=new RegExp('@'+_0x5bb326[_0x147f04(0x228)]+'\x22','gi');_0x5ac980=_0x5ac980['replace'](_0x5c2518,'@'+_0x5bb326['to']+'\x22');}_0x5bc74a=JSON[_0x147f04(0x219)](_0x5ac980);}catch(_0x3cd727){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x1ea)+_0x3cd727['message']+'\x20message:\x20'+_0x5ac980),_0x270119['logger'][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}const _0x574d46=_0x5bc74a['user'];if(!_0x574d46){_0x270119['logger'][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x199)+JSON[_0x147f04(0x210)](_0x5bc74a)),_0x270119[_0x147f04(0x208)]['debug'](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}if(!_0x574d46[_0x147f04(0x1a7)]){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x18d)+JSON[_0x147f04(0x210)](_0x5bc74a)),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}delete _0x574d46['schemas'];let _0x18ea73;_0x574d46['id']&&(_0x18ea73=_0x574d46['id'],delete _0x574d46['id']);let _0xdf6232;_0x574d46[_0x147f04(0x1e1)]&&(_0xdf6232=utils[_0x147f04(0x215)](_0x574d46[_0x147f04(0x1e1)]),delete _0x574d46[_0x147f04(0x1e1)]);await _0x513d67(_0x574d46);const _0x542a8e=_0x574d46['userName'];let _0x2a4ebd,_0x26b857;try{_0x2a4ebd=await _0x140a47(_0x147f04(0x1a7),_0x542a8e);}catch(_0x507442){_0x270119[_0x147f04(0x208)]['error'](_0xe21f07+_0x147f04(0x235)+_0x507442[_0x147f04(0x1f7)]),_0x270119[_0x147f04(0x208)]['debug'](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}if(_0x179084['convertRolesToGroups']){let _0x823192=![];if(_0x5bc74a[_0x147f04(0x1be)]&&Array[_0x147f04(0x185)](_0x5bc74a[_0x147f04(0x1be)]))for(let _0x45c670=0x0;_0x45c670<_0x5bc74a['Operations']['length'];_0x45c670++){const _0x1fadb1=_0x5bc74a['Operations'][_0x45c670];_0x1fadb1[_0x147f04(0x21d)][_0x147f04(0x1bf)]('roles')&&(_0x1fadb1['path']=_0x147f04(0x221),Array[_0x147f04(0x185)](_0x1fadb1[_0x147f04(0x18a)])?(_0x1fadb1[_0x147f04(0x18a)][0x0]['id']=_0x1fadb1[_0x147f04(0x18a)][0x0][_0x147f04(0x18a)],_0x1fadb1['value'][0x0][_0x147f04(0x1c0)]=_0x1fadb1[_0x147f04(0x18a)][0x0][_0x147f04(0x204)]+_0x147f04(0x1c1)+_0x1fadb1['value'][0x0][_0x147f04(0x18a)],delete _0x1fadb1['value'][0x0]['value'],delete _0x1fadb1[_0x147f04(0x18a)][0x0][_0x147f04(0x204)]):_0x1fadb1['value']=[{'id':_0x1fadb1['value'],'display':_0x1fadb1['value']}],delete _0x1fadb1[_0x147f04(0x1eb)],_0x823192=!![]);}if(_0x574d46[_0x147f04(0x19c)]&&Array[_0x147f04(0x185)](_0x574d46[_0x147f04(0x19c)])&&_0x574d46[_0x147f04(0x19c)][_0x147f04(0x1a5)]>0x0){if(!_0x574d46['groups'])_0x574d46[_0x147f04(0x221)]=[];if(!Array[_0x147f04(0x185)](_0x574d46[_0x147f04(0x221)]))_0x574d46['groups']=[];for(let _0x580f59=0x0;_0x580f59<_0x574d46['roles'][_0x147f04(0x1a5)];_0x580f59++){const _0x4f2e22={},_0x47a1f8=_0x574d46[_0x147f04(0x19c)][_0x580f59];_0x4f2e22['value']=_0x47a1f8[_0x147f04(0x18a)],_0x4f2e22[_0x147f04(0x1c0)]=_0x47a1f8[_0x147f04(0x204)]+_0x147f04(0x1c1)+_0x47a1f8[_0x147f04(0x1c0)],_0x574d46[_0x147f04(0x221)][_0x147f04(0x1ca)](_0x4f2e22);}delete _0x574d46['roles'],_0x823192=!![];}if(_0x823192)_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x180)+JSON[_0x147f04(0x210)](_0x5bc74a));}if(_0x179084['deleteUserOnLastGroupRoleRemoval']&&_0x5bc74a['activityOperation']===_0x147f04(0x1b2)){if(_0x574d46[_0x147f04(0x221)]&&Array[_0x147f04(0x185)](_0x574d46[_0x147f04(0x221)])&&_0x574d46['groups']['length']===0x0){if(_0x574d46['roles']&&Array[_0x147f04(0x185)](_0x574d46['roles'])&&_0x574d46[_0x147f04(0x19c)]['length']===0x0){if(_0x5bc74a[_0x147f04(0x1be)]&&Array['isArray'](_0x5bc74a[_0x147f04(0x1be)])&&_0x5bc74a['Operations'][_0x147f04(0x1a5)]>0x0)for(let _0x130f59=0x0;_0x130f59<_0x5bc74a[_0x147f04(0x1be)][_0x147f04(0x1a5)];_0x130f59++){const _0x1169d6=_0x5bc74a[_0x147f04(0x1be)][_0x130f59];if(_0x1169d6['op']==='remove'){if(_0x1169d6[_0x147f04(0x21d)]){if(_0x1169d6[_0x147f04(0x21d)][_0x147f04(0x1bf)]('roles')&&_0x1169d6['typeId'])_0x5bc74a[_0x147f04(0x1a6)]=_0x147f04(0x1b4);else _0x1169d6[_0x147f04(0x21d)]==='groups'&&(_0x5bc74a[_0x147f04(0x1a6)]=_0x147f04(0x1b4));}}}}}}if(!_0x2a4ebd){if(_0x5bc74a['activityOperation']===_0x147f04(0x1b4)){_0x270119['logger'][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1d8)+_0x542a8e+_0x147f04(0x249)),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20done'+_0x24597f);return;}if(_0x179084['modifyOnly']&&_0x179084[_0x147f04(0x232)]===!![]){_0x270119[_0x147f04(0x208)]['debug'](_0xe21f07+'\x20Create\x20userName='+_0x542a8e+'\x20message:\x20user\x20not\x20created\x20because\x20of\x20configuration\x20modifyOnly=true'),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20done'+_0x24597f);return;}if(Object[_0x147f04(0x1d4)][_0x147f04(0x1cc)]['call'](_0x574d46,'active')){if(typeof _0x574d46[_0x147f04(0x1d2)]===_0x147f04(0x1b6)){const _0x1b788f=_0x574d46[_0x147f04(0x1d2)][_0x147f04(0x197)]();if(_0x1b788f===_0x147f04(0x1b7))_0x574d46[_0x147f04(0x1d2)]=!![];else{if(_0x1b788f==='false')_0x574d46['active']=![];}}if(_0x574d46[_0x147f04(0x1d2)]===![]){_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1ae)+_0x542a8e+_0x147f04(0x1cf)),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}}_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1fe)+_0x542a8e);const _0x16f6ff=utils[_0x147f04(0x215)](_0x574d46);try{delete _0x16f6ff[_0x147f04(0x221)];!_0x16f6ff['password']&&_0x179084['generateUserPassword']&&_0x179084[_0x147f04(0x230)]===!![]&&(_0x16f6ff[_0x147f04(0x244)]=utils[_0x147f04(0x224)](0xf));if(_0xdf6232||_0x18ea73){if(_0xdf6232)for(const _0x49d686 in _0xdf6232){_0x16f6ff[_0x49d686]=_0xdf6232[_0x49d686];}if(_0x18ea73)_0x16f6ff['id']=_0x18ea73;await _0x513d67(_0x16f6ff);}await _0x270119[_0x147f04(0x225)](_0x5c87b4,_0x16f6ff),_0x574d46['groups']&&Array[_0x147f04(0x185)](_0x574d46['groups'])&&_0x574d46[_0x147f04(0x221)]['length']>0x0&&(_0x26b857=await _0x140a47(_0x147f04(0x1a7),_0x542a8e));}catch(_0x54880d){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x1c8)+JSON[_0x147f04(0x210)](_0x16f6ff)+_0x147f04(0x211)+_0x54880d['message']+'}'),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20done'+_0x24597f);return;}}if(_0x2a4ebd||_0x26b857){if(_0x5bc74a[_0x147f04(0x1a6)]===_0x147f04(0x1b4)){if(_0x179084['modifyOnly']&&_0x179084[_0x147f04(0x232)]===!![]){_0x270119[_0x147f04(0x208)]['debug'](_0xe21f07+'\x20Delete\x20User\x20id='+_0x2a4ebd+_0x147f04(0x23a)),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20Delete\x20User\x20id='+_0x2a4ebd);try{await _0x270119[_0x147f04(0x1b4)](_0x5c87b4,_0x2a4ebd);}catch(_0x11f6b7){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x192)+_0x2a4ebd+_0x147f04(0x211)+_0x11f6b7[_0x147f04(0x1f7)]+'}'),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}}else{if(_0x26b857)_0x2a4ebd=_0x26b857;_0x270119['logger']['debug'](_0xe21f07+'\x20Replace\x20User\x20id='+_0x2a4ebd);const _0x155353={};_0x155353[_0x147f04(0x1fc)]=()=>{},_0x155353[_0x147f04(0x1c6)]=_0x5c87b4?'/'+_0x5c87b4+'/Users/'+_0x2a4ebd:'/Users/'+_0x2a4ebd,_0x155353[_0x147f04(0x216)]={},_0x155353['params']['id']=_0x2a4ebd,_0x155353['request']={},_0x155353[_0x147f04(0x1ff)][_0x147f04(0x1de)]=_0x574d46;try{await _0x270119['replaceUsrGrp'](_0x155353);}catch(_0x441364){_0x270119['logger'][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x20d)+_0x2a4ebd+_0x147f04(0x211)+_0x441364[_0x147f04(0x1f7)]),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+_0x147f04(0x1bb)+_0x24597f);return;}if(_0x155353['status']&&_0x155353[_0x147f04(0x1f8)]!==0xc8){if(_0x155353[_0x147f04(0x1de)]){if(_0x155353[_0x147f04(0x1de)][_0x147f04(0x213)]){let _0x685ba=_0x155353[_0x147f04(0x1de)]['detail'];_0x685ba=_0x685ba['replace'](_0x270119[_0x147f04(0x223)]+'['+_0x270119[_0x147f04(0x1e4)]+']',''+_0xe21f07),_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](''+_0x685ba);}else{if(_0x155353['body'][_0x147f04(0x1c5)]&&Array[_0x147f04(0x185)](_0x155353[_0x147f04(0x1de)][_0x147f04(0x1c5)])&&_0x155353[_0x147f04(0x1de)][_0x147f04(0x1c5)][_0x147f04(0x1a5)]>0x0){let _0x3c6f28=_0x155353[_0x147f04(0x1de)][_0x147f04(0x1c5)][0x0][_0x147f04(0x187)];_0x3c6f28=_0x3c6f28[_0x147f04(0x196)](_0x270119[_0x147f04(0x223)]+'['+_0x270119[_0x147f04(0x1e4)]+']',''+_0xe21f07),_0x270119['logger'][_0x147f04(0x237)](''+_0x3c6f28);}}}}if(_0x179084['usePutSoftSync']){const [_0x270184,_0x1d7bc6]=_0x270119[_0x147f04(0x1db)]({'Operations':_0x5bc74a[_0x147f04(0x1be)]});if(_0x1d7bc6){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x20d)+_0x2a4ebd+_0x147f04(0x194)+_0x1d7bc6[_0x147f04(0x1f7)]),_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20done'+_0x24597f);return;}const _0x26e295=[];if(_0x270184['roles']&&Array[_0x147f04(0x185)](_0x270184[_0x147f04(0x19c)]))for(let _0x2e7106=0x0;_0x2e7106<_0x270184['roles'][_0x147f04(0x1a5)];_0x2e7106++){_0x270184[_0x147f04(0x19c)][_0x2e7106]['operation']&&_0x270184[_0x147f04(0x19c)][_0x2e7106]['operation']===_0x147f04(0x24c)&&_0x26e295[_0x147f04(0x1ca)](_0x270184['roles'][_0x2e7106]);}if(_0x26e295[_0x147f04(0x1a5)]>0x0)try{await _0x270119[_0x147f04(0x1b2)](_0x5c87b4,_0x2a4ebd,{'roles':_0x26e295});}catch(_0x2d1973){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x20d)+_0x2a4ebd+'\x20role\x20removal\x20error:\x20'+_0x2d1973[_0x147f04(0x1f7)]);}const _0x5aafd1=[];if(_0x270184[_0x147f04(0x221)]&&Array['isArray'](_0x270184[_0x147f04(0x221)]))for(let _0x1e3447=0x0;_0x1e3447<_0x270184['groups'][_0x147f04(0x1a5)];_0x1e3447++){_0x270184[_0x147f04(0x221)][_0x1e3447][_0x147f04(0x1d1)]&&_0x270184['groups'][_0x1e3447][_0x147f04(0x1d1)]===_0x147f04(0x24c)&&_0x5aafd1['push'](_0x270184['groups'][_0x1e3447]);}if(_0x5aafd1[_0x147f04(0x1a5)]>0x0)for(let _0x2f99fc=0x0;_0x2f99fc<_0x5aafd1[_0x147f04(0x1a5)];_0x2f99fc++){try{await _0x270119['modifyGroup'](_0x5c87b4,_0x5aafd1[_0x2f99fc]['id'],{'members':[{'operation':_0x147f04(0x24c),'value':_0x2a4ebd}]});}catch(_0x5a601c){_0x270119['logger'][_0x147f04(0x237)](_0xe21f07+_0x147f04(0x20d)+_0x2a4ebd+'\x20group\x20removal\x20error:\x20'+_0x5a601c[_0x147f04(0x1f7)]);}}}}}_0x270119[_0x147f04(0x208)][_0x147f04(0x1e2)](_0xe21f07+'\x20done'+_0x24597f);}catch(_0x18ab6d){_0x270119[_0x147f04(0x208)][_0x147f04(0x237)](_0x270119['gwName']+'['+_0x270119[_0x147f04(0x1e4)]+_0x147f04(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x147f04(0x1ec)+_0x18ab6d['message']+'\x20=>\x20subscriber\x20not\x20activated'+_0x24597f);}},_0x5269bc=nats[_0x2927e1(0x1b0)](),_0x43dcbc=_0x455a85[_0x2927e1(0x1c9)](),_0x2514a5=(_0x2927e1(0x1ee)+_0x270119['pluginName']+'_'+_0x5c87b4)['replaceAll']('*','#')[_0x2927e1(0x1af)]('>','##')[_0x2927e1(0x1af)]('.','_');let _0x54faee;const _0x3390f5=async()=>{const _0x4c9e3f=_0x2927e1;try{const _0x45e5e2=''+_0x179084[_0x4c9e3f(0x231)][_0x4c9e3f(0x22d)],_0x182983=await _0x455a85['jetstreamManager'](),_0x15db67=async()=>{const _0x29a41b=_0x4c9e3f;let _0x5d5dbe;try{_0x5d5dbe=await _0x43dcbc[_0x29a41b(0x1d6)][_0x29a41b(0x1ef)](_0x45e5e2,_0x2514a5);}catch(_0x48a505){await _0x182983[_0x29a41b(0x1d6)][_0x29a41b(0x1cd)](_0x45e5e2,{'durable_name':_0x2514a5,'ack_policy':nats[_0x29a41b(0x183)][_0x29a41b(0x214)],'deliver_policy':nats['DeliverPolicy'][_0x29a41b(0x1e3)],'deliver_group':_0x179084?.[_0x29a41b(0x231)]?.[_0x29a41b(0x23b)]||null,'filter_subject':_0x4f1028}),_0x5d5dbe=await _0x43dcbc['consumers'][_0x29a41b(0x1ef)](_0x45e5e2,_0x2514a5);}(_0x4f1028!==_0x5d5dbe?.[_0x29a41b(0x243)]?.[_0x29a41b(0x1d5)]?.[_0x29a41b(0x1b9)]||_0x179084?.['nats']?.[_0x29a41b(0x23b)]!==_0x5d5dbe?.[_0x29a41b(0x243)]?.[_0x29a41b(0x1d5)]?.['deliver_group'])&&(await _0x182983['consumers'][_0x29a41b(0x20a)](_0x45e5e2,_0x2514a5,{'deliver_group':_0x179084?.[_0x29a41b(0x231)]?.[_0x29a41b(0x23b)]||null,'filter_subject':_0x4f1028}),_0x5d5dbe=await _0x43dcbc[_0x29a41b(0x1d6)]['get'](_0x45e5e2,_0x2514a5)),_0x54faee=await _0x5d5dbe[_0x29a41b(0x1e6)]({'max_messages':0x64});};await _0x15db67();const _0x2ff8e4=async()=>{const _0x33d7f7=_0x4c9e3f;for await(const _0x2f240e of await _0x54faee[_0x33d7f7(0x1f8)]()){switch(_0x2f240e[_0x33d7f7(0x204)]){case nats[_0x33d7f7(0x1fd)][_0x33d7f7(0x1ad)]:if(_0x2f240e['data']===0x1)_0x270119['logger'][_0x33d7f7(0x21e)](_0x270119[_0x33d7f7(0x223)]+'['+_0x270119[_0x33d7f7(0x1e4)]+_0x33d7f7(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x33d7f7(0x1c4)+_0x2f240e[_0x33d7f7(0x204)]),_0x15db67();else _0x2f240e[_0x33d7f7(0x189)]%0xa===0x0&&_0x270119[_0x33d7f7(0x208)][_0x33d7f7(0x237)](_0x270119[_0x33d7f7(0x223)]+'['+_0x270119['pluginName']+_0x33d7f7(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x33d7f7(0x1fb)+_0x2f240e[_0x33d7f7(0x204)]+_0x33d7f7(0x1f0)+_0x2f240e[_0x33d7f7(0x189)]);break;}}};_0x2ff8e4();for await(const _0x3c1892 of _0x54faee){if(!_0x3c1892[_0x4c9e3f(0x184)]||!_0x3c1892[_0x4c9e3f(0x184)][_0x4c9e3f(0x1ef)](_0x4c9e3f(0x195))){_0x3c1892[_0x4c9e3f(0x222)]();continue;}const _0x447307=_0x270119[_0x4c9e3f(0x223)]+'['+_0x270119['pluginName']+_0x4c9e3f(0x1a2)+_0x5c87b4+']['+_0x3c1892[_0x4c9e3f(0x1a4)]+']['+_0x54faee['getProcessed']()+']['+(_0x3c1892[_0x4c9e3f(0x184)]?_0x3c1892[_0x4c9e3f(0x184)][_0x4c9e3f(0x1ef)](_0x4c9e3f(0x195)):'')+']',_0x45593d=_0x5269bc[_0x4c9e3f(0x24b)](_0x3c1892['data']);await _0x293d39(_0x447307,_0x45593d),_0x3c1892[_0x4c9e3f(0x222)]();}}catch(_0x29e7d4){_0x270119[_0x4c9e3f(0x208)]['error'](_0x270119[_0x4c9e3f(0x223)]+'['+_0x270119[_0x4c9e3f(0x1e4)]+_0x4c9e3f(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x4c9e3f(0x20f)+_0x29e7d4[_0x4c9e3f(0x1f7)]);}};_0x3390f5();const _0x20ee35=async()=>{const _0x4d3003=_0x2927e1;let _0x4df74b=0x0;for await(const _0x2e159b of _0x455a85[_0x4d3003(0x1f8)]()){switch(_0x2e159b[_0x4d3003(0x204)]){case nats[_0x4d3003(0x1e8)][_0x4d3003(0x182)]:_0x270119[_0x4d3003(0x208)][_0x4d3003(0x237)](_0x270119[_0x4d3003(0x223)]+'['+_0x270119[_0x4d3003(0x1e4)]+']\x20subscriber['+_0x5c87b4+']['+_0x4f1028+_0x4d3003(0x1cb)+_0x2e159b[_0x4d3003(0x189)]+_0x4d3003(0x217)),_0x4df74b=0x0;break;case nats[_0x4d3003(0x1e8)][_0x4d3003(0x21b)]:_0x270119[_0x4d3003(0x208)][_0x4d3003(0x21e)](_0x270119[_0x4d3003(0x223)]+'['+_0x270119[_0x4d3003(0x1e4)]+_0x4d3003(0x1a2)+_0x5c87b4+']['+_0x4f1028+']\x20client\x20reconnected\x20'+_0x2e159b[_0x4d3003(0x189)]);try{if(_0x54faee[_0x4d3003(0x19b)])await _0x54faee[_0x4d3003(0x19b)]();}catch(_0x310a44){if(_0x54faee[_0x4d3003(0x233)])_0x54faee[_0x4d3003(0x233)]();}break;case nats[_0x4d3003(0x1e8)][_0x4d3003(0x247)]:_0x270119[_0x4d3003(0x208)][_0x4d3003(0x237)](_0x270119['gwName']+'['+_0x270119[_0x4d3003(0x1e4)]+_0x4d3003(0x1a2)+_0x5c87b4+']['+_0x4f1028+']\x20client\x20error\x20'+_0x2e159b[_0x4d3003(0x189)]);break;case nats[_0x4d3003(0x22f)][_0x4d3003(0x190)]:_0x4df74b+=0x1;_0x4df74b%0x1e===0x0&&_0x270119[_0x4d3003(0x208)][_0x4d3003(0x1e2)](_0x270119[_0x4d3003(0x223)]+'['+_0x270119[_0x4d3003(0x1e4)]+']\x20subscriber['+_0x5c87b4+']['+_0x4f1028+_0x4d3003(0x22b)+_0x2e159b['data']+_0x4d3003(0x239)+_0x4df74b+')');break;case nats[_0x4d3003(0x22f)]['StaleConnection']:_0x270119[_0x4d3003(0x208)][_0x4d3003(0x1e2)](_0x270119['gwName']+'['+_0x270119[_0x4d3003(0x1e4)]+_0x4d3003(0x1a2)+_0x5c87b4+']['+_0x4f1028+_0x4d3003(0x20c)+_0x2e159b[_0x4d3003(0x189)]);break;}}};_0x20ee35(),process['on'](_0x2927e1(0x1e9),async()=>{const _0x4c96b4=_0x2927e1;_0x455a85&&await _0x455a85[_0x4c96b4(0x198)]();}),process['on'](_0x2927e1(0x21f),async()=>{const _0x16a9c5=_0x2927e1;_0x455a85&&await _0x455a85[_0x16a9c5(0x198)]();});};const _0x140a47=async(_0x43b9d0,_0x2adec8)=>{const _0x5df30d=_0x11841c,_0x1f39cb={'attribute':_0x43b9d0,'operator':'eq','value':_0x2adec8,'rawFilter':undefined,'startIndex':undefined,'count':undefined},_0x88216f=[_0x43b9d0];if(_0x43b9d0!=='id')_0x88216f[_0x5df30d(0x1ca)]('id');try{const _0x392cba=await _0x270119['getUsers'](_0x5c87b4,_0x1f39cb,_0x88216f);if(!_0x392cba||!_0x392cba[_0x5df30d(0x1b5)]||!Array[_0x5df30d(0x185)](_0x392cba[_0x5df30d(0x1b5)]))throw new Error(_0x5df30d(0x1a1)+JSON[_0x5df30d(0x210)](_0x1f39cb)+_0x5df30d(0x1b3));if(_0x392cba['Resources']['length']===0x0)return null;else{if(_0x392cba[_0x5df30d(0x1b5)][_0x5df30d(0x1a5)]>0x2)throw new Error(_0x5df30d(0x1a1)+JSON[_0x5df30d(0x210)](_0x1f39cb)+_0x5df30d(0x1da));else{const _0x133e9d=_0x392cba[_0x5df30d(0x1b5)][0x0];if(!_0x133e9d['id'])throw new Error(_0x5df30d(0x1a1)+JSON[_0x5df30d(0x210)](_0x1f39cb)+_0x5df30d(0x229)+JSON[_0x5df30d(0x210)](_0x133e9d)+_0x5df30d(0x203));return decodeURIComponent(_0x133e9d['id']);}}}catch(_0x16c0d8){throw new Error('getUsers()\x20getObj='+JSON[_0x5df30d(0x210)](_0x1f39cb)+_0x5df30d(0x211)+_0x16c0d8['message']+'}');}},_0x3dc666=_0x1b9b0f=>{const _0x2be6b3=_0x11841c;if(!_0x1b9b0f||typeof _0x1b9b0f!==_0x2be6b3(0x1b6))return[null,null];_0x1b9b0f=_0x1b9b0f[_0x2be6b3(0x1ac)]();const _0x14ac72=_0x1b9b0f[_0x2be6b3(0x241)]('(');if(_0x14ac72<0x1)return[null,null];if(_0x1b9b0f[_0x2be6b3(0x19f)](_0x1b9b0f[_0x2be6b3(0x1a5)]-0x1)!==')')return[null,null];if(_0x2dc145(_0x1b9b0f,'(')!==_0x2dc145(_0x1b9b0f,')'))return[null,null];const _0x415daf=_0x1b9b0f[_0x2be6b3(0x19f)](0x0,_0x14ac72),_0x31fa6e=_0x1b9b0f[_0x2be6b3(0x19f)](_0x14ac72+0x1,_0x1b9b0f['length']-0x1);let _0x384111=[];const _0x2ca6e5=_0x31fa6e['split'](',');let _0x54a963='';for(let _0xd47ed9=0x0;_0xd47ed9<_0x2ca6e5[_0x2be6b3(0x1a5)];_0xd47ed9++){const _0x4c8670=_0x54a963?_0x54a963+','+_0x2ca6e5[_0xd47ed9]:_0x2ca6e5[_0xd47ed9],_0x431edf=_0x2dc145(_0x4c8670,'('),_0xf7eba=_0x2dc145(_0x4c8670,')');if(_0x431edf===_0xf7eba)_0x384111[_0x2be6b3(0x1ca)](_0x496c04(_0x4c8670,'\x22')),_0x54a963='';else{if(_0x54a963)_0x54a963+=','+_0x2ca6e5[_0xd47ed9];else _0x54a963+=_0x2ca6e5[_0xd47ed9];}}if(_0x384111[_0x2be6b3(0x1a5)]===0x0)_0x384111=null;return[_0x415daf,_0x384111];};function _0x2dc145(_0x1dbe35,_0x37381f){const _0x276db9=_0x11841c;let _0x596259=0x0;for(let _0x4cea34=0x0;_0x4cea34<_0x1dbe35[_0x276db9(0x1a5)];_0x4cea34++){_0x1dbe35['charAt'](_0x4cea34)===_0x37381f&&(_0x596259+=0x1);}return _0x596259;}const _0x496c04=(_0x288c5c,_0x12c3b5)=>{const _0x319a84=_0x11841c;if(typeof _0x288c5c!==_0x319a84(0x1b6)||typeof _0x12c3b5!==_0x319a84(0x1b6))return _0x288c5c;if(_0x288c5c[_0x319a84(0x1a5)]===0x1)return _0x288c5c;if(_0x12c3b5['length']!==0x1)return _0x288c5c;return _0x288c5c=_0x288c5c[_0x319a84(0x1ac)](),_0x288c5c[_0x319a84(0x19f)](0x0,0x1)===_0x12c3b5&&(_0x288c5c=_0x288c5c[_0x319a84(0x19f)](0x1)),_0x288c5c['substring'](_0x288c5c[_0x319a84(0x1a5)]-0x1)===_0x12c3b5&&(_0x288c5c=_0x288c5c['substring'](0x0,_0x288c5c[_0x319a84(0x1a5)]-0x1)),_0x288c5c;},_0x1769e8=async(_0x164954,_0x4f7ba7,_0x31d7da)=>{const _0x51f466=_0x11841c;if(!_0x164954||!_0x4f7ba7||!_0x31d7da)return null;const [_0x23dc63,_0x379b1b]=_0x3dc666(_0x31d7da);if(!_0x23dc63||!_0x379b1b){const _0x238335=_0x31d7da[_0x51f466(0x205)]('(');if(_0x238335[_0x51f466(0x1a5)]>0x1){const _0x528c7d=[_0x51f466(0x1ce),'uppercase',_0x51f466(0x226),'elementnumber',_0x51f466(0x19e),'replace',_0x51f466(0x200),_0x51f466(0x212),'getuniquevalue'],_0x5da65a=_0x238335[0x0]['toLowerCase']();if(_0x528c7d['includes'](_0x5da65a))return null;}return _0x31d7da;}for(let _0xde8306=0x0;_0xde8306<_0x379b1b[_0x51f466(0x1a5)];_0xde8306++){if(_0x379b1b[_0xde8306][_0x51f466(0x19f)](0x0,0x1)==='['){const _0x131d13=_0x379b1b[_0xde8306][_0x51f466(0x241)](']');if(_0x131d13<0x0)return null;const _0xa82ee2=_0x379b1b[_0xde8306][_0x51f466(0x19f)](0x1,_0x131d13),_0x4d80fc=_0xa82ee2[_0x51f466(0x205)]('.');let _0x3ff463;for(let _0x37933a=0x0;_0x37933a<_0x4d80fc[_0x51f466(0x1a5)];_0x37933a++){if(_0x37933a===0x0)_0x3ff463=_0x164954[_0x4d80fc[_0x37933a]];else{if(!_0x3ff463)return null;_0x3ff463=_0x3ff463[_0x4d80fc[_0x37933a]];}}if(!_0x3ff463)return null;_0x379b1b[_0xde8306]=_0x3ff463;}}for(let _0x5642ed=0x0;_0x5642ed<_0x379b1b[_0x51f466(0x1a5)];_0x5642ed++){const [_0x151f19]=_0x3dc666(_0x379b1b[_0x5642ed]);_0x151f19&&(_0x379b1b[_0x5642ed]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x379b1b[_0x5642ed]));}if(_0x379b1b[0x0]===null)return null;switch(_0x23dc63[_0x51f466(0x197)]()){case'lowercase':{if(_0x379b1b[_0x51f466(0x1a5)]!==0x1)return null;const [_0x2b0c42]=_0x3dc666(_0x379b1b[0x0]);if(_0x2b0c42)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x2b0c42);if(_0x379b1b[0x0]===null)return null;return _0x379b1b[0x0][_0x51f466(0x197)]();}case'uppercase':{if(_0x379b1b['length']!==0x1)return null;const [_0x12ce82]=_0x3dc666(_0x379b1b[0x0]);if(_0x12ce82)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x12ce82);if(_0x379b1b[0x0]===null)return null;return _0x379b1b[0x0][_0x51f466(0x1f1)]();}case _0x51f466(0x226):{if(_0x379b1b[_0x51f466(0x1a5)]!==0x2)return null;const [_0x106c94]=_0x3dc666(_0x379b1b[0x0]);if(_0x106c94)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x106c94);if(_0x379b1b[0x0]===null)return null;if(isNaN(_0x379b1b[0x1]))return null;return _0x379b1b[0x0][_0x51f466(0x19f)](0x0,_0x379b1b[0x1]);}case'elementnumber':{const [_0x8e99ec]=_0x3dc666(_0x379b1b[0x0]);if(_0x379b1b[_0x51f466(0x1a5)]<0x2)return null;if(_0x8e99ec)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x8e99ec);if(_0x379b1b[0x0]===null)return null;const _0x46e453=_0x379b1b[0x1];if(isNaN(_0x46e453))return null;let _0x1accea;if(_0x379b1b[_0x51f466(0x1a5)]===0x3)_0x1accea=_0x379b1b[0x0]['split'](_0x379b1b[0x2]);else _0x1accea=_0x1accea=_0x379b1b[0x0][_0x51f466(0x205)]('\x20');if(_0x46e453<=_0x1accea[_0x51f466(0x1a5)])return _0x1accea[_0x46e453-0x1];else return'';}case _0x51f466(0x196):{const [_0x158479]=_0x3dc666(_0x379b1b[0x0]);if(_0x158479)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x158479);if(_0x379b1b[0x0]===null)return null;if(_0x379b1b['length']!==0x3)return null;return _0x379b1b[0x0][_0x51f466(0x1af)](_0x379b1b[0x1],_0x379b1b[0x2]);}case _0x51f466(0x200):{if(_0x379b1b['length']!==0x1)return null;const [_0x167062]=_0x3dc666(_0x379b1b[0x0]);if(_0x167062)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x167062);if(_0x379b1b[0x0]===null)return null;return ascii127[_0x51f466(0x238)](_0x379b1b[0x0]);}case'join':{let _0x3c79f3='';for(let _0x5687b7=0x0;_0x5687b7<_0x379b1b[_0x51f466(0x1a5)];_0x5687b7++){const [_0x9aaeb]=_0x3dc666(_0x379b1b[_0x5687b7]);if(_0x9aaeb)_0x379b1b[_0x5687b7]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x9aaeb);if(_0x379b1b[_0x5687b7]===null)return null;_0x3c79f3+=_0x379b1b[_0x5687b7];}return _0x3c79f3;}case _0x51f466(0x212):{if(_0x379b1b[_0x51f466(0x1a5)]>0x2)return null;const [_0x496a66]=_0x3dc666(_0x379b1b[0x0]);if(_0x496a66)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x496a66);if(_0x379b1b[0x0]===null)return null;const _0xf347f4=parseInt(_0x379b1b[0x0]);if(isNaN(_0xf347f4))return null;let _0x2cfcb5='##doIncrement';_0x2cfcb5+=','+_0x379b1b[0x0];if(_0x379b1b[_0x51f466(0x1a5)]===0x2&&_0x379b1b[0x1][_0x51f466(0x197)]()===_0x51f466(0x1b7))_0x2cfcb5+=',true';else _0x2cfcb5+=',false';return _0x2cfcb5+='##',_0x2cfcb5;}case _0x51f466(0x248):{if(_0x379b1b[_0x51f466(0x1a5)]!==0x1)return null;const [_0x216ebd]=_0x3dc666(_0x379b1b[0x0]);if(_0x216ebd)_0x379b1b[0x0]=await _0x1769e8(_0x164954,_0x4f7ba7,_0x216ebd);if(_0x379b1b[0x0]===null)return null;let _0x5766ee,_0xf19c74=![],_0x215a87='';const _0x3fb752=_0x379b1b[0x0][_0x51f466(0x205)]('##');if(_0x3fb752[_0x51f466(0x1a5)]>0x2)for(let _0x3f7fe8=0x0;_0x3f7fe8<_0x3fb752[_0x51f466(0x1a5)];_0x3f7fe8++){if(_0x3fb752[_0x3f7fe8][_0x51f466(0x1bf)](_0x51f466(0x1bc))){const _0x3af7dd=_0x3fb752[_0x3f7fe8][_0x51f466(0x205)](',');if(_0x3af7dd[_0x51f466(0x1a5)]<0x2)return null;const _0x335ea6=parseInt(_0x3af7dd[0x1]);if(isNaN(_0x335ea6))return null;_0x215a87='##'+_0x3fb752[_0x3f7fe8]+'##',_0x5766ee=_0x3af7dd[0x1],_0x3af7dd[_0x51f466(0x1a5)]>0x2&&(_0xf19c74=_0x3af7dd[0x2][_0x51f466(0x197)]()===_0x51f466(0x1b7));}}let _0x9a4a95,_0x5cf87e=0x0,_0x192ce8=0x0;if(_0x5766ee){_0x192ce8=_0x5766ee['length'],_0x5cf87e=0xa;for(let _0x2aaafd=0x1;_0x2aaafd<_0x192ce8;_0x2aaafd++){_0x5cf87e*=0xa;}_0x5cf87e-=0x1,_0x9a4a95=parseInt(_0x5766ee);if(isNaN(_0x9a4a95))return null;_0x9a4a95-=0x1;}else _0x9a4a95=0x0;do{_0x9a4a95+=0x1;let _0x54b5ec=_0x379b1b[0x0];if(_0x5766ee!==undefined&&_0x215a87){let _0x1ce28d=_0x9a4a95[_0x51f466(0x21c)]();while(_0x1ce28d['length']<_0x192ce8){_0x1ce28d='0'+_0x1ce28d;}_0xf19c74?_0x54b5ec=_0x54b5ec[_0x51f466(0x196)](_0x215a87,_0x1ce28d):(_0x54b5ec=_0x54b5ec[_0x51f466(0x196)](_0x215a87,''),_0xf19c74=!![],_0x9a4a95-=0x1);}try{const _0x1254da=await _0x140a47(_0x4f7ba7,_0x54b5ec);if(!_0x1254da)return _0x54b5ec;}catch(_0x245a0b){return _0x270119[_0x51f466(0x208)][_0x51f466(0x237)](_0x270119[_0x51f466(0x223)]+'['+_0x270119[_0x51f466(0x1e4)]+']\x20'+_0x23dc63+_0x51f466(0x235)+_0x245a0b[_0x51f466(0x1f7)]),null;}}while(_0x9a4a95<_0x5cf87e);return null;}default:}return null;},_0x513d67=async _0x5ca414=>{const _0xb822c2=_0x11841c;for(const _0x3ce37c in _0x5ca414){const _0x39d781=_0x5ca414[_0x3ce37c],[_0x3fb779,_0x366843]=_0x3dc666(_0x39d781);if(_0x3fb779){const _0x584059=''+_0x3ce37c,_0x180a68=_0x3fb779+'('+_0x366843[_0xb822c2(0x19e)](',')+')',_0x37f905=await _0x1769e8(_0x5ca414,_0x584059,_0x180a68);if(_0x37f905===null)delete _0x5ca414[_0x3ce37c];else _0x5ca414[_0x3ce37c]=_0x37f905;}for(const _0x12604f in _0x39d781){const _0x4c0a9c=_0x39d781[_0x12604f],[_0x1e85d1,_0x471518]=_0x3dc666(_0x4c0a9c);if(_0x1e85d1){const _0x2e2f91=_0x3ce37c+'.'+_0x12604f,_0x1d6808=_0x1e85d1+'('+_0x471518[_0xb822c2(0x19e)](',')+')',_0x5a9dec=await _0x1769e8(_0x5ca414,_0x2e2f91,_0x1d6808);if(_0x5a9dec===null)delete _0x39d781[_0x12604f];else _0x39d781[_0x12604f]=_0x5a9dec;}}}return _0x5ca414;};},module[a0_0x2b18c7(0x227)][a0_0x2b18c7(0x1f2)]=async(_0x428e7e,_0x2258be,_0x1f978f,_0x73189b)=>{const _0x229578=a0_0x2b18c7,_0x1bbdec=_0x229578(0x1f2),_0x4ec794=_0x428e7e;_0x4ec794[_0x229578(0x208)][_0x229578(0x1e2)](_0x4ec794[_0x229578(0x223)]+'['+_0x4ec794[_0x229578(0x1e4)]+_0x229578(0x1c3)+_0x1bbdec+'\x22');try{if(!fs[_0x229578(0x1a3)](_0x4ec794[_0x229578(0x245)]+'/approles'))fs[_0x229578(0x1dc)](_0x4ec794[_0x229578(0x245)]+'/approles');}catch(_0x59b984){}const _0x27d13c=path['join'](''+_0x4ec794[_0x229578(0x245)],_0x229578(0x1f9),_0x229578(0x1d9)+_0x4ec794[_0x229578(0x1e4)]+'_autogenerated.cfg'),_0x5c1ed4={};utils[_0x229578(0x1aa)](_0x27d13c)&&fs[_0x229578(0x246)](_0x27d13c,_0x229578(0x22e))[_0x229578(0x205)](/\r?\n/)[_0x229578(0x220)](_0x3a5724=>{const _0x46a032=_0x229578,_0x3a03c4=_0x3a5724[_0x46a032(0x205)]('\x20');_0x3a03c4[_0x46a032(0x1a5)]===0x2&&(_0x5c1ed4[_0x3a03c4[0x0]]=_0x3a03c4[0x1]);});const _0x5bda79=fs[_0x229578(0x1b8)](_0x27d13c,{'flags':'w','encoding':_0x229578(0x1d0),'mode':0x1b6,'autoClose':!![]}),_0x4e1daf=[],_0x3967b0=await _0x4ec794[_0x229578(0x1a9)](_0x2258be,{'attribute':undefined,'operator':undefined,'value':undefined},['id',_0x229578(0x207)]);return _0x3967b0[_0x229578(0x1b5)][_0x229578(0x220)](_0x2193fb=>{const _0x25b375=_0x229578;if(_0x2193fb['id']){let _0x1619a0=crypto['randomUUID']();if(_0x5c1ed4[_0x2193fb['id']])_0x1619a0=_0x5c1ed4[_0x2193fb['id']];const _0x366137={'allowedMemberTypes':[_0x25b375(0x19a)],'description':_0x25b375(0x1df),'displayName':_0x2193fb[_0x25b375(0x207)]||_0x2193fb['id'],'id':_0x1619a0,'isEnabled':!![],'lang':null,'origin':_0x25b375(0x23c),'value':decodeURIComponent(_0x2193fb['id'])};_0x4e1daf[_0x25b375(0x1ca)](_0x366137),_0x5bda79[_0x25b375(0x1a8)](_0x2193fb['id']+'\x20'+_0x1619a0+'\x0a');}}),_0x5bda79[_0x229578(0x1ed)](),_0x4ec794[_0x229578(0x208)][_0x229578(0x1e2)](_0x4ec794[_0x229578(0x223)]+'['+_0x4ec794[_0x229578(0x1e4)]+_0x229578(0x1f6)+_0x27d13c),{'Resources':[{'appRoles':_0x4e1daf}]};};